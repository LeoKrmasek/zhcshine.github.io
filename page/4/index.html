<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">












  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222">






<link rel="stylesheet" href="/css/main.css?v=7.2.0">






<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">








<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.2.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    }
  };
</script>

  <meta name="description" content="技术博客、日记记录">
<meta property="og:type" content="website">
<meta property="og:title" content="Wellread">
<meta property="og:url" content="http://www.zhuohc.com/page/4/index.html">
<meta property="og:site_name" content="Wellread">
<meta property="og:description" content="技术博客、日记记录">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Wellread">
<meta name="twitter:description" content="技术博客、日记记录">





  
  
  <link rel="canonical" href="http://www.zhuohc.com/page/4/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  
  <title>Wellread</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Wellread</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">饱读诗书</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>Search</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.zhuohc.com/2016/11/10/pythontkinter入门基础/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="www.zhuohc.om">
      <meta itemprop="description" content="技术博客、日记记录">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wellread">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/10/pythontkinter入门基础/" class="post-title-link" itemprop="url">pythontkinter入门基础</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-11-10 10:58:02" itemprop="dateCreated datePublished" datetime="2016-11-10T10:58:02+08:00">2016-11-10</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-07-24 09:37:19" itemprop="dateModified" datetime="2019-07-24T09:37:19+08:00">2019-07-24</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/后端/" itemprop="url" rel="index"><span itemprop="name">后端</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>python基础环境</p>
<pre><code>sudo apt-get install python
sudo apt-get install python-pip</code></pre><p>Tkinter安装</p>
<pre><code>sudo apt-get install python-tk</code></pre><p>配置组件外观</p>
<pre><code>#!/usr/bin/python
# -*- coding: UTF-8 -*-
from Tkinter import *
root = Tk()
# 定义图标
if sys.platform == &apos;win32&apos;:
    root.iconbitmap(&apos;favicon.ico&apos;)
else:
    icon = PhotoImage(file=&apos;phone.gif&apos;)
    root.tk.call(&apos;wm&apos;, &apos;iconphoto&apos;, root._w, icon)
# 定义字体，字号，类型
label_font = (&apos;Ubuntu&apos;, 20, &apos;bold underline italic&apos;)
# 创建组件
widget = Label(root, text=&apos;Hello,云克隆&apos;, padx=100, pady=20)
# 配置组件字体
widget.config(font=label_font)
# 组件宽，高
widget.config(height=3, width=20)
# 组件背景颜色
widget.config(bg=&apos;#FF0&apos;)
# 组件字体颜色
widget.config(fg=&apos;#F0F&apos;)
# 组件边框宽度
widget.config(bd=3)
# 组件边框外形, FLAT扁平, SUNKEN凹陷, RAISED凸起, GROOVE凹槽, SOLID加粗, RIDGE脊状,
widget.config(relief=SUNKEN)
# 组件鼠标手势, &apos;gumby&apos;, &apos;watch&apos;, &apos;pencil&apos;, &apos;crdss&apos;, hand2
widget.config(cursor=&apos;gumby&apos;)
# 组件状态, DISABLE禁用, NORMAL正常, READONLY只读
widget.config(state=DISABLED)
# 布置组件
# expand设置是否可以扩展，fill表示随父组件扩展方向，可以设置BOTH, X, Y
# 设置组件padding值
# side表示按钮布置窗口的位置
widget.pack(expand=True, fill=X, padx=10, pady=50, side=LEFT)
root.mainloop()</code></pre><h4 id="标准弹出框"><a href="#标准弹出框" class="headerlink" title="标准弹出框"></a>标准弹出框</h4><pre><code># -*- coding: UTF-8 -*-
from Tkinter import *
from tkMessageBox import *
# python3
# from Tkinter.messagebox import *
def callback():
    if askyesno(&apos;Verify&apos;, &apos;Do you ready want to quit?&apos;):
        showwarning(&apos;Yes&apos;, &apos;Quit not yet&apos;)
    else:
        showinfo(&apos;No&apos;, &apos;Quit has been cancelled&apos;)

errmsg = &apos;Sorry, no spam allowed&apos;
Button(None, text=&apos;Quit&apos;, command=callback).pack(fill=X)
Button(None, text=&apos;spam&apos;, command=(lambda: showerror(&apos;spam&apos;, errmsg))).pack(fill=X)
mainloop()</code></pre><h4 id="常见弹框"><a href="#常见弹框" class="headerlink" title="常见弹框"></a>常见弹框</h4><pre><code># gui6.py
# -*- coding: UTF-8 -*-
from Tkinter import *
from tkMessageBox import *
from tkFileDialog import *
from tkColorChooser import *
from tkSimpleDialog import *


demos = {
    &apos;Open&apos;: askopenfilename,
    &apos;Color&apos;: askcolor,
    &apos;Query&apos;: lambda: askquestion(&apos;Warning&apos;, &apos;You typed &quot;rm *&quot;\nconfirm?&apos;),
    &apos;Error&apos;: lambda: showerror(&apos;Error!&apos;, &apos;He is dead&apos;),
    &apos;Input&apos;: lambda: askfloat(&apos;Entry&apos;, &apos;Enter credit card number&apos;)
}


class Demo(Frame):
    def __init__(self, parent=None, **options):
        Frame.__init__(self, parent, **options)
        self.pack()
        Label(self, text=&apos;Basic demos&apos;).pack()
        for (key, value) in demos.items():
            Button(self, text=key, command=value).pack(side=TOP, fill=BOTH)

if __name__ == &apos;__main__&apos;:
    Demo().mainloop()
自定义弹框

# -*- coding: UTF-8 -*-
import sys
from Tkinter import *
makemodal = (len(sys.argv) &gt; 1)

def dialog():
    win = Toplevel()
    Label(win, text=&apos;Hard drive reformatted!&apos;).pack()
    Button(win, text=&apos;OK&apos;, command=win.destroy).pack()
    if makemodal:
        # 获取输入的焦点
        win.focus_set()
        # 打开的时候，禁用其他窗口
        win.grab_set()
        # 在win销毁之前，继续等待
        win.wait_window()
    print &apos;dialog exit&apos;

root = Tk()
Button(root, text=&apos;popup&apos;, command=dialog).pack()
root.mainloop()</code></pre><h4 id="绑定事件"><a href="#绑定事件" class="headerlink" title="绑定事件"></a>绑定事件</h4><pre><code># -*- coding: UTF-8 -*-
from Tkinter import *


def showPosEvent(event):
    print(&apos;Widget=%s, X=%s, Y=%s&apos; % (event.widget, event.x, event.y))


def showAllEvent(event):
    print(event)
    for attr in dir(event):
        if not attr.startswith(&apos;__&apos;):
            print(attr, &apos;=&gt;&apos;, getattr(event, attr))


def onKeyPress(event):
    print(&apos;Got key press: &apos;, event.char)


def onArrowKey(event):
    print(&apos;Got up arrow key press&apos;)


def onReturnKey(event):
    print(&apos;Got return key press&apos;)


def onLeftClick(event):
    print(&apos;Got left mouse button click: &apos;)
    showPosEvent(event)


def onRightClick(event):
    print(&apos;Got right mouse button click: &apos;)
    showPosEvent(event)


def onMiddleClick(event):
    print(&apos;Got middle mouse button click: &apos;)
    showPosEvent(event)
    showAllEvent(event)


def onLeftDrag(event):
    print(&apos;Got left mouse drag click: &apos;)
    showPosEvent(event)


def onDoubleLeftClick(event):
    print(&apos;Got double left mouse click: &apos;)
    showPosEvent(event)
    tkroot.quit()


tkroot = Tk()
labelfont = (&apos;courier&apos;, 20, &apos;bold&apos;)
widget = Label(tkroot, text=&apos;Hello bind world&apos;)
widget.config(bg=&apos;red&apos;, font=labelfont)
widget.config(height=5, width=20)
widget.pack(expand=YES, fill=BOTH)
# 绑定单击左键
widget.bind(&apos;&lt;Button-1&gt;&apos;, onLeftClick)
# 绑定单击右键
widget.bind(&apos;&lt;Button-3&gt;&apos;, onRightClick)
# 绑定单击中键
widget.bind(&apos;&lt;Button-2&gt;&apos;, onMiddleClick)
# 绑定双击左键
widget.bind(&apos;&lt;Double-1&gt;&apos;, onDoubleLeftClick)
# 绑定拖拽 B1表示点击左键，Motion表示拖拽
widget.bind(&apos;&lt;B1-Motion&gt;&apos;, onLeftDrag)
# 绑定键盘按键
widget.bind(&apos;&lt;KeyPress&gt;&apos;, onKeyPress)
# 绑定按下箭头键
widget.bind(&apos;&lt;Up&gt;&apos;, onArrowKey)
# 绑定回车，返回键
widget.bind(&apos;&lt;Return&gt;&apos;, onReturnKey)
widget.focus()
tkroot.title(&apos;CLICK ME&apos;)
tkroot.mainloop()

# &lt;ButtonPress&gt; 按下按钮
# &lt;ButtonRelease&gt; 松开按钮
# &lt;Motion&gt; 鼠标指针移动
# &lt;Configure&gt; 窗口大小，位置改变时候
# &lt;Destroy&gt; 销毁窗口
# &lt;FocusIn&gt; 获取焦点
# &lt;FocusOut&gt; 失去焦点
# &lt;Map&gt; 窗口打开
# &lt;Unmap&gt; 窗口最小化
# &lt;Escape&gt;, &lt;BackSpace&gt;, &lt;Tab&gt; 捕获特点ESC键，回车键，tab键
# &lt;Down&gt;, &lt;Up&gt;, &lt;Left&gt;, &lt;Right&gt; 捕获方向键
# &lt;B1-Motion&gt; 按下左键并拖拽
# &lt;KeyPress-a&gt; 按下按键“a”，大小写敏感</code></pre><h4 id="输入框"><a href="#输入框" class="headerlink" title="输入框"></a>输入框</h4><pre><code># -*- coding: UTF-8 -*-
from Tkinter import *
from quitGui import Quitter

fields = &apos;Name&apos;, &apos;Job&apos;, &apos;Pay&apos;


def fetch(entries):
    for entry in entries:
        print(&apos;Input =&gt; %s&apos; % entry.get())  # 获取文本信息


def makeform(root, fields):
    entries = []
    for field in fields:
        row = Frame(root)
        lab = Label(row, width=5, text=field)
        ent = Entry(row)
        row.pack(side=TOP, fill=X)
        lab.pack(side=LEFT)
        ent.pack(side=RIGHT, expand=YES, fill=X)
        entries.append(ent)
    return entries


def show(entries, popup):
    fetch(entries)  # 必须在销毁前取出
    popup.destroy()  # 如果修改了stmt， order， msgs会随之失败


def ask():
    popup = Toplevel()  # 在模拟对话框窗口中显示表单
    ents = makeform(popup, fields)
    Button(popup, text=&apos;OK&apos;, command=(lambda: show(ents, popup))).pack()
    popup.grab_set()  # 打开的时候，禁用其他窗口
    popup.focus_set()  # 获取输入的焦点
    popup.wait_window()  # 在这里等待销毁


if __name__ == &apos;__main__&apos;:
    root = Tk()
    Button(root, text=&apos;Dialog&apos;, command=ask).pack()
    root.mainloop()</code></pre><h4 id="复选框"><a href="#复选框" class="headerlink" title="复选框"></a>复选框</h4><pre><code># gui13.py
# -*- coding: UTF-8 -*-
from Tkinter import *
from gui6 import demos
from quitGui import Quitter


class Demo(Frame):
    def __init__(self, parent=None, **options):
        Frame.__init__(self, parent, **options)
        self.pack()
        self.tools()
        Label(self, text=&apos;Ckech demos&apos;).pack()
        self.vars = []
        for key in demos:
            var = IntVar()
            Checkbutton(self, text=key, variable=var, command=demos[key]).pack(side=LEFT)
            self.vars.append(var)

    def report(self):
        for var in self.vars:
            print(var.get())  # 当前开关设置1或者0
        print()

    def tools(self):
        frm = Frame(self)
        frm.pack(side=RIGHT)
        Button(frm, text=&apos;State&apos;, command=self.report).pack(fill=X)
        Quitter(frm).pack(fill=X)


if __name__ == &apos;__main__&apos;:
    Demo().mainloop()</code></pre><h4 id="单选按钮"><a href="#单选按钮" class="headerlink" title="单选按钮"></a>单选按钮</h4><pre><code>#gui14.py
# -*- coding: UTF-8 -*-
from Tkinter import *
from gui6 import demos
from quitGui import Quitter


class Demo(Frame):
    def __init__(self, parent=None, **options):
        Frame.__init__(self, parent, **options)
        self.pack()
        Label(self, text=&apos;Radio demos&apos;).pack(side=TOP)
        self.var = StringVar()
        # variable表示单选按钮的变量，相当与html的name标签
        # value表示单选按钮的变量值，相当与html的value标签
        for key in demos:
            Radiobutton(self, text=key, command=self.onPress, variable=self.var, value=key).pack(anchor=NW)
        self.var.set(key)  # 选中最后一个开始
        Button(self, text=&apos;State&apos;, command=self.report).pack(fill=X)
        Quitter(self).pack(fill=X)

    def onPress(self):
        pick = self.var.get()
        print(&apos;you pressed&apos;, pick)
        print(&apos;result: &apos;, demos[pick]())  # 按钮使用返回的值

    def report(self):
        print(self.var.get())

if __name__ == &apos;__main__&apos;:
    Demo().mainloop()</code></pre><h4 id="标尺滚动条"><a href="#标尺滚动条" class="headerlink" title="标尺滚动条"></a>标尺滚动条</h4><pre><code># gui16.py
# -*- coding: UTF-8 -*-
from Tkinter import *
from gui6 import demos
from quitGui import Quitter


class Demo(Frame):
    def __init__(self, parent=None, **options):
        Frame.__init__(self, parent, **options)
        self.pack()
        Label(self, text=&apos;Scale demos&apos;).pack()
        self.var = IntVar()
        Scale(self, label=&apos;Pick demo number&apos;,
              command=self.onMove, variable=self.var,
              from_=0, to=len(demos)-1).pack()
        Scale(self, label=&apos;Pick demo number&apos;,  # 标尺的文本
              command=self.onMove,  # 绑定回调
              variable=self.var,  # 变量
              from_=0,   # 标尺最小值
              to=len(demos) - 1,   # 标尺最大值
              length = 200,  # 长度
              tickinterval = 2,   # 每隔几个单位显示标记单位
              showvalue = YES,  # 显示或隐藏标尺滑动条旁边的当前值
              orient = &apos;horizontal&apos;  # 横向展示
              ).pack()
        Quitter(self).pack(side=RIGHT)
        Button(self, text=&apos;Run demo&apos;, command=self.onRun).pack(side=LEFT)
        Button(self, text=&apos;State&apos;, command=self.report).pack(side=RIGHT)

    def onMove(self, value):
        print(&apos;in onMove&apos;, value)

    def onRun(self):
        pos = self.var.get()
        print(&apos;you picked&apos;, pos)
        demo = list(demos.values())[pos]
        print(demo())

    def report(self):
        print(self.var.get())

if __name__ == &apos;__main__&apos;:
    print(list(demos.keys()))
    Demo().mainloop()</code></pre><h4 id="创建图片"><a href="#创建图片" class="headerlink" title="创建图片"></a>创建图片</h4><pre><code># gui17.py
# -*- coding: UTF-8 -*-
from Tkinter import *

gifdir = &apos;./gif/&apos;
win = Tk()
igm = PhotoImage(file=gifdir + &apos;logo.png&apos;)

# 按钮上绑定图片
# Button(win, image=igm).pack()
# win.mainloop()

# 创建画布
can = Canvas(win)
can.pack(fill=BOTH)
can.config(width=igm.width() + 4, height=igm.height() + 4)
can.create_image(2,  # x坐标
                 2,  # y坐标
                 image=igm, anchor=NW)
win.mainloop()</code></pre><h3 id="按钮随机读取图片"><a href="#按钮随机读取图片" class="headerlink" title="按钮随机读取图片"></a>按钮随机读取图片</h3><pre><code># gui18.py
# -*- coding: UTF-8 -*-
from glob import glob
from gui13 import *
import random

gifdir = &apos;./gif/&apos;

&quot; 按钮随机读取图片 &quot;
class ButtonPicsDemo(Frame):
    def __init__(self, gifdir=gifdir, parent=None):
        Frame.__init__(self, parent)
        self.pack()
        self.lbl = Label(self, text=&apos;none&apos;, bg=&apos;blue&apos;, fg=&apos;red&apos;)
        self.pix = Button(self, text=&apos;press me&apos;, command=self.draw, bg=&apos;white&apos;)
        self.lbl.pack(fill=BOTH)
        self.pix.pack(pady=10)
        Demo(self, relief=SUNKEN, bd=2).pack(fill=BOTH)
        # glob模块， glob方法，返回所有匹配的文件列表
        files = glob(gifdir + &apos;*.png&apos;)
        self.images = [(x, PhotoImage(file=x)) for x in files]
        print(files)

    def draw(self):
        name, photo = random.choice(self.images)
        self.lbl.config(text=name)
        self.pix.config(image=photo)

if __name__ == &apos;__main__&apos;:
    if __name__ == &apos;__main__&apos;:
        ButtonPicsDemo().mainloop()</code></pre><h4 id="缩略图"><a href="#缩略图" class="headerlink" title="缩略图"></a>缩略图</h4><pre><code># gui19.py
# -*- coding: UTF-8 -*-
import os
import math
import PIL
from PIL import Image
from Tkinter import *


def make_thumbs(img_dir, size=(100, 100), subdir=&apos;thumbs&apos;):
    thumb_dir = os.path.join(img_dir, subdir)
    if not os.path.exists(thumb_dir):
        os.mkdir(thumb_dir)
    thumbs = []
    for img_file in os.listdir(img_dir):
        thumb_path = os.path.join(thumb_dir, img_file)
        if os.path.exists(thumb_path):
            thumb_obj = PIL.Image.open(thumb_path)
            thumbs.append((img_file, thumb_obj))
        else:
            print(&apos;making&apos;, thumb_path)
            img_path = os.path.join(img_dir, img_file)
            try:
                img_obj = PIL.Image.open(img_path)
                img_obj.thumbnail(size, PIL.Image.ANTIALIAS)
                img_obj.save(thumb_path)
                thumbs.append((img_file, img_obj))
            except Exception, e:
                print(&apos;skipping: &apos;, img_path)
                print e
    return thumbs


class ViewOne(Toplevel):
    def __init__(self, img_dir, img_file):
        Toplevel.__init__(self)
        self.title(img_file)
        img_path = os.path.join(img_dir, img_file)
        img_obj = PhotoImage(file=img_path)
        Label(self, image=img_obj).pack()
        print(img_path, img_obj.width(), img_obj.height())
        self.savephoto = img_obj


def viewer(img_dir, kind=Toplevel, cols=None):
    win = kind()
    win.title(&apos;VIEWER: &apos; + img_dir)
    thumbs = make_thumbs(img_dir)
    if not cols:
        # 固定大小 或者N×N
        cols = int(math.ceil(math.sqrt(len(thumbs))))
    savephotos = []
    while thumbs:
        thumbs_row, thumbs = thumbs[:cols], thumbs[cols:]
        row = Frame(win)
        row.pack(fill=BOTH)
        for(img_file, img_obj) in thumbs_row:
            size = max(img_obj.size)
            photo = PhotoImage(file=os.path.join(img_dir, &apos;thumbs&apos;, img_file))
            link = Button(row, image=photo)
        handler = lambda savefile=img_file: ViewOne(img_dir, savefile)
        link.config(command=handler, width=size, height=size)
        link.pack(side=LEFT, expand=YES)
        savephotos.append(photo)
    Button(win, text=&apos;Quit&apos;, command=win.quit, bg=&apos;beige&apos;).pack(fill=X)
    return win, savephotos

if __name__ == &apos;__main__&apos;:
    img_dir = len(sys.argv) &gt; 1 and sys.argv[1] or &apos;gif&apos;
    main, save = viewer(img_dir, kind=Tk)
    main.mainloop()</code></pre><h3 id="创建基础顶级菜单"><a href="#创建基础顶级菜单" class="headerlink" title="创建基础顶级菜单"></a>创建基础顶级菜单</h3><pre><code># gui20.py
# -*- coding: UTF-8 -*-
from Tkinter import *
from tkMessageBox import *


def not_done():
    showerror(&apos;Not implemented&apos;, &apos;Not yet available&apos;)


def make_menu(win):
    top = Menu(win)  # 定义顶级菜单
    win.config(menu=top)
    file = Menu(top, tearoff=True)  # 一级菜单 tearoff:设置菜单下的虚线是否显示
    file.add_command(label=&apos;New...&apos;, command=not_done, underline=0)
    file.add_command(label=&apos;Open...&apos;, command=not_done, underline=0)
    file.add_command(label=&apos;Quit...&apos;, command=win.quit,  underline=0)
    top.add_cascade(label=&apos;File&apos;, menu=file, underline=0)  # 在顶级菜单中添加一级菜单

    edit = Menu(top, tearoff=False)  # 一级菜单
    edit.add_command(label=&apos;Cut&apos;, command=not_done, underline=0)
    edit.add_command(label=&apos;Paste&apos;, command=not_done, underline=0)
    edit.add_separator()  # 添加下划线
    top.add_cascade(label=&apos;Edit&apos;, menu=edit, underline=0)

    submenu = Menu(edit, tearoff=True)  # 二级菜单
    submenu.add_command(label=&apos;Spam&apos;, command=win.quit, underline=0)
    submenu.add_command(label=&apos;Eggs&apos;, command=not_done, underline=0)
    edit.add_cascade(label=&apos;Stuff&apos;, menu=submenu, underline=0)  # 在一级菜单中添加二级菜单

if __name__ == &apos;__main__&apos;:
    root = Tk()
    root.title(&apos;menu_win&apos;)
    make_menu(root)
    msg = Label(root, text=&apos;Window menu basic&apos;)
    msg.pack(expand=YES, fill=BOTH)
    msg.config(relief=SUNKEN, width=40, height=7, bg=&apos;beige&apos;)
    root.mainloop()</code></pre><h4 id="创建框架级别菜单"><a href="#创建框架级别菜单" class="headerlink" title="创建框架级别菜单"></a>创建框架级别菜单</h4><pre><code># gui21.py
# -*- coding: UTF-8 -*-
from Tkinter import *
from tkMessageBox import *


def not_done():
    showerror(&apos;Not implemented&apos;, &apos;Not yet available&apos;)


def make_menu(parent):
    menu_bar = Frame(parent)
    menu_bar.pack(side=TOP, fill=X)

    f_button = Menubutton(menu_bar, text=&apos;File&apos;, underline=0)
    f_button.pack(side=LEFT)
    file = Menu(f_button)
    file.add_command(label=&apos;New...&apos;, command=not_done, underline=0)
    file.add_command(label=&apos;Open...&apos;, command=not_done, underline=0)
    file.add_command(label=&apos;Quit...&apos;, command=parent.quit,  underline=0)
    f_button.config(menu=file)

    e_button = Menubutton(menu_bar, text=&apos;Edit&apos;, underline=0)
    e_button.pack(side=LEFT)
    edit = Menu(e_button)
    edit.add_command(label=&apos;Cut&apos;, command=not_done, underline=0)
    edit.add_command(label=&apos;Paste&apos;, command=not_done, underline=0)
    edit.add_separator()
    e_button.config(menu=edit)

    sub_menu = Menu(edit, tearoff=True)
    sub_menu.add_command(label=&apos;Spam&apos;, command=parent.quit, underline=0)
    sub_menu.add_command(label=&apos;Eggs&apos;, command=not_done, underline=0)
    edit.add_cascade(label=&apos;Stuff&apos;, menu=sub_menu, underline=0)
    return menu_bar



if __name__ == &apos;__main__&apos;:
    root = Tk()
    root.title(&apos;menu_fra&apos;)
    for i in range(2):
        mnu = make_menu(root)
        mnu.config(bd=2, relief=RAISED)
        Label(root, bg=&apos;black&apos;, height=5, width=25).pack(expand=YES, fill=BOTH)
    Button(root, text=&apos;Bye&apos;, command=root.quit).pack()
    root.mainloop()</code></pre><h4 id="图片菜单"><a href="#图片菜单" class="headerlink" title="图片菜单"></a>图片菜单</h4><pre><code># gui22.py
# -*- coding:UTF-8 -*-
from Tkinter import *
from tkMessageBox import *


class NewMenuDemo(Frame):
    def __init__(self, parent=None):
        Frame.__init__(self, parent)
        self.pack(expand=YES, fill=BOTH)
        self.create_widgets()

    def create_widgets(self):
        self.make_menubar()
        self.make_toolbar()
        l = Label(self, text=&apos;Menu and Toolbar Demo&apos;)
        l.config(relief=SUNKEN, width=40, height=10, bg=&apos;white&apos;)
        l.pack(expand=YES, fill=BOTH)

    def make_toolbar(self, size=(30, 30)):
        toolbar = Frame(self, cursor=&apos;hand2&apos;, relief=SUNKEN, bd=2)
        toolbar.pack(side=BOTTOM, fill=X)
        Button(toolbar, text=&apos;Quit&apos;, command=self.quit).pack(side=RIGHT)
        photo_files = (&apos;at.png&apos;, &apos;bd.png&apos;, &apos;dk.png&apos;)
        self.tool_photo_objs = []
        for file in photo_files:
            img = PhotoImage(file=&apos;./gif/thumbs/&apos; + file)
            btn = Button(toolbar, image=img, command=self.greeting)
            btn.config(bd=5, relief=RIDGE)
            btn.config(width=size[0], height=size[0])
            btn.pack(side=LEFT)
            self.tool_photo_objs.append(img)
        Button(toolbar, text=&apos;Hello&apos;, command=self.greeting).pack(side=LEFT)

    def make_menubar(self):
        self.menubar = Menu(self.master)
        self.master.config(menu=self.menubar)
        self.file_menu()
        self.edit_menu()
        self.image_menu()

    def file_menu(self):
        pulldown = Menu(self.menubar)
        pulldown.add_command(label=&apos;OPEN...&apos;, command=self.notdone)
        pulldown.add_command(label=&apos;QUIT&apos;, command=self.quit)
        self.menubar.add_cascade(label=&apos;FILE&apos;, underline=0, menu=pulldown)

    def edit_menu(self):
        pulldown = Menu(self.menubar)
        pulldown.add_command(label=&apos;PASTE&apos;, command=self.notdone)
        pulldown.add_command(label=&apos;SPAM&apos;, command=self.greeting)
        pulldown.add_separator()
        pulldown.add_command(label=&apos;DELETE&apos;, command=self.greeting)
        pulldown.entryconfig(4, state=DISABLED)
        self.menubar.add_cascade(label=&apos;EDIT&apos;, underline=0, menu=pulldown)

    def image_menu(self):
        photo_files = (&apos;at.png&apos;, &apos;bd.png&apos;, &apos;dk.png&apos;)
        pulldown = Menu(self.menubar)
        self.photo_objs = []
        for file in photo_files:
            img = PhotoImage(file=&apos;./gif/&apos; + file)
            pulldown.add_command(image=img, command=self.notdone)
            self.photo_objs.append(img)
        self.menubar.add_cascade(label=&apos;IMAGE&apos;, underline=0, menu=pulldown)

    def greeting(self):
        showinfo(&apos;greeting&apos;, &apos;GREETING&apos;)

    def notdone(self):
        showerror(&apos;NOT DONE&apos;, &apos;NOT DONE&apos;)

    def quit(self):
        if askyesno(&apos;Verify quit&apos;, &apos;Sure?&apos;):
            Frame.quit(self)

if __name__ == &apos;__main__&apos;:
    NewMenuDemo().mainloop()</code></pre><h4 id="滚动条与列表"><a href="#滚动条与列表" class="headerlink" title="滚动条与列表"></a>滚动条与列表</h4><pre><code># gui23.py
# -*- coding: UTF-8 -*-
from Tkinter import *


class ScrolledList(Frame):
    def __init__(self, options, parent=None):
        Frame.__init__(self, parent)
        self.pack(expand=YES, fill=BOTH)
        self.makeWidgets(options)


    def handle_list(self, event):
        index = self.listbox.curselection()  # 鼠标选中的行
        label = self.listbox.get(index)  # 获取鼠标选中的值
        self.runCommand(label)  # 打印出值


    def makeWidgets(self, options):
        # sbar = Scrollbar(self, orient=&apos;horizontal&apos;)  # 横向滚动
        sbar = Scrollbar(self)
        list = Listbox(self, relief=SUNKEN)
        sbar.config(command=list.yview)  # 移动滚动条启用回调： 按比例调节列表框的显示，
        list.config(yscrollcommand=sbar.set)  # 移动列表框启用回调：按比例调节滚动条
        sbar.pack(side=RIGHT, fill=Y)
        list.pack(side=LEFT, expand=YES, fill=BOTH)
        pos = 0
        for label in options:
            list.insert(pos, label)
            pos += 1
        # selectmode 选择模式SINGLE(单选), BROWSE(默认单选), MULTIPLE(多选), EXTENDED(多选)
        # 启用多选时， curselection返回列表
        # 启用单选时， curselection返回字符串
        list.config(selectmode=EXTENDED, setgrid=1)
        list.bind(&apos;&lt;Double-1&gt;&apos;, self.handle_list)
        self.listbox = list

    def runCommand(self, selection):
        print(&apos;YOU SELECTED:&apos;, selection)


if __name__ == &apos;__main__&apos;:
    options = ((&apos;Lumberjack-%s&apos; % x) for x in range(20))
    ScrolledList(options).mainloop()</code></pre><h4 id="TEXT组件"><a href="#TEXT组件" class="headerlink" title="TEXT组件"></a>TEXT组件</h4><pre><code>gui24.py
# -*- coding: UTF-8 -*-
from Tkinter import *


class ScrollText(Frame):
    def __init__(self, parent=None, text=&apos;&apos;, file=None):
        Frame.__init__(self, parent)
        self.pack(expand=YES, fill=BOTH)
        self.make_widgets()
        self.set_text(text, file)

    def make_widgets(self):
        sbar = Scrollbar(self)
        text = Text(self, relief=SUNKEN)
        sbar.config(command=text.yview)
        text.config(yscrollcommand=sbar.set)
        sbar.pack(side=RIGHT, fill=Y)
        text.pack(side=LEFT, expand=YES, fill=BOTH)
        self.text = text

    def set_text(self, text=&apos;&apos;, file=None):
        if file:
            text = open(file, &apos;r&apos;).read()
        # 1.0表示第一行，第0列（行从1开始，列从0开始）
        # END表示最末一个字符后面第一个位置
        self.text.delete(&apos;1.0&apos;, END)  # 删除从第一行第0列开始到最后的字符串，即删除全部
        self.text.insert(&apos;1.0&apos;, text)  # 从第一行第0列开始填充数据
        # mark_set 设置text标志
        self.text.mark_set(INSERT, &apos;1.0&apos;)  # 设置将光标设置在文本开始位置
        # self.text.mark_set(&apos;line_two&apos;, &apos;2.2&apos;)  # 自定义标志位置 可以用mark_unset取消
        self.text.focus()
        # TEXT的tag标签
        # SEL是内置的标签，表示当前选中的文本
        # text = self.text.get(SEL_FIRST, SEL_LAST)
        # text = self.text.get(&apos;sel.first&apos;, &apos;sel.last&apos;)
        # self.text.tag_add(&apos;alltext&apos;, &apos;1.0&apos;, END)  # 选中所有文本
        # self.text.tag_add(SEL, index1, index2)  # 将一定范围内的文本添加到内建的SEL标签
        # self.text.tag_remove(SEL, &apos;1.0&apos;, END)  # 将字符串所有字符从SEL标签中删除
        # self.text.tag_delete(SEL)  # 删除SEL标签
        # self.text.tag_add(&apos;demo&apos;, &apos;1.5&apos;, &apos;1.7&apos;)
        # self.text.tag_add(&apos;demo&apos;, &apos;3.0&apos;, &apos;5.7&apos;)
        # self.text.tag_config(&apos;demo&apos;, background=&apos;purple&apos;)
        # self.text.tag_config(&apos;demo&apos;, fontground=&apos;white&apos;)
        # self.text.tag_config(&apos;demo&apos;, font=(&apos;times&apos;, 16, &apos;underline&apos;))
        # self.text.tag_bind(&apos;demo&apos;, &apos;&lt;Double-1&gt;&apos;, func)
        # see方法
        # self.text.see(&apos;1.0&apos;)  # 滚动到第一行第0列
        # self.text.see(INSERT)  # 滚动到光标插入处
        # self.text.see(SEL_FIRST)  # 滚动到选中文本第一个字符串
    def get_text(self):
        # -1c 表示往回数一个字符串
        # +1l 表示往前数一行
        return self.text.get(&apos;1.0&apos;, END + &apos;-1c&apos;)


if __name__ == &apos;__main__&apos;:
    root = Tk()
    if len(sys.argv) &gt; 1:
        st = ScrollText(file=sys.argv[1])
    else:
        st = ScrollText(text=&apos;Words\ngo here&apos;)

    def show(event):
        print(repr(st.get_text()))

    root.bind(&apos;&lt;Key-Escape&gt;&apos;, show)
    root.mainloop()</code></pre><h4 id="简单的文本编辑器"><a href="#简单的文本编辑器" class="headerlink" title="简单的文本编辑器"></a>简单的文本编辑器</h4><pre><code># gui25.py
# -*- coding: UTF-8 -*-
from Tkinter import *
from tkSimpleDialog import askstring
from tkFileDialog import asksaveasfilename
from quitGui import Quitter
from gui24 import ScrollText


class SimpleEditor(ScrollText):
    def __init__(self, parent=None, file=None):
        frm = Frame(parent)
        frm.pack(fill=X)
        Button(frm, text=&apos;Save&apos;, command=self.on_save).pack(side=LEFT)
        Button(frm, text=&apos;Cut&apos;, command=self.on_cut).pack(side=LEFT)
        Button(frm, text=&apos;Paste&apos;, command=self.on_paste).pack(side=LEFT)
        Button(frm, text=&apos;Find&apos;, command=self.on_find).pack(side=LEFT)
        Quitter(frm).pack(side=LEFT)
        ScrollText.__init__(self, parent, file=file)
        self.text.config(font=(&apos;courier&apos;, 9, &apos;normal&apos;))

    def on_save(self):
        filename = asksaveasfilename()
        if filename:
            alltext = self.get_text()
            open(filename, &apos;w&apos;).write(alltext)


    def on_cut(self):
        text = self.text.get(SEL_FIRST, SEL_LAST)
        self.text.delete(SEL_FIRST, SEL_LAST)
        self.clipboard_clear()
        self.clipboard_append(text)


    def on_paste(self):
        try:
            text = self.selection_get(selection=&apos;CLIPBOARD&apos;)
            self.text.insert(INSERT, text)
        except TclError:
            pass


    def on_find(self):
        target = askstring(&apos;SimpleEdit&apos;, &apos;Search string?&apos;)
        if target:
            where = self.text.search(target, INSERT, END)
            if where:
                print(where)
                pastit = where + (&apos;+%dc&apos; % len(target))
                self.text.tag_remove(SEL, &apos;1.0&apos;, END)
                self.text.tag_add(SEL, where, pastit)
                self.text.mark_set(INSERT, pastit)
                self.text.see(INSERT)
                self.text.focus()

if __name__ == &apos;__main__&apos;:
    if len(sys.argv) &gt; 1:
        SimpleEditor(file=sys.argv[1]).mainloop()
    else:
        SimpleEditor().mainloop()</code></pre><h4 id="创建基础画布"><a href="#创建基础画布" class="headerlink" title="创建基础画布"></a>创建基础画布</h4><pre><code># gui26.py
# -*- coding: UTF-8 -*-

from Tkinter import *
canvas = Canvas(width=525, height=300, bg=&apos;white&apos;)
canvas.pack(expand=YES, fill=BOTH)

canvas.create_line(100, 100, 200, 200)
canvas.create_line(100, 200, 200, 300)
for i in range(1, 20, 2):
    canvas.create_line(0, i, 50, i)
canvas.create_oval(20, 20, 300, 100, width=10, fill=&apos;yellow&apos;)
d = {1:PIESLICE,2:CHORD,3:ARC}
for i in d:
    canvas.create_arc(
        (10,10 + 60*i,110,110 + 60*i),
        style=d[i],   #指定样式
        start=30,     #指定起始角度
        extent=30     #指定角度偏移量
        )
canvas.create_arc(0, 0, 100, 200, fill=&apos;black&apos;)
canvas.create_rectangle(200, 200, 300, 300, width=5, fill=&apos;red&apos;)
canvas.create_line(0, 300, 150, 150, width=10, fill=&apos;green&apos;)

photo = PhotoImage(file=&apos;./gif/lightmachine.png&apos;)
canvas.create_image(325,25, image=photo, anchor=NW)

widget = Label(canvas, text=&apos;Spam&apos;, fg=&apos;white&apos;, bg=&apos;black&apos;)
widget.pack()
canvas.create_window(100, 100, window=widget)
canvas.create_text(100, 280, text=&apos;CLOUD CLONE CORP.&apos;)

# id = canvas.create_line(fromX, fromY, toX, toY)  # 创建直线
# id = canvas.create_oval(fromX, fromY, toX, toY) # 创建椭圆
# id = canvas.create_arc(fromX, fromY, toX, toY)  # 创建扇形
# id =canvas.create_rectangle(fromX, fromY, toX, toY)  # 创建矩形
# canvas.move(id, offsetX, offsetY)  # 移动对象
# canvas.delete(id)  # 删除对象
# canvas.tkraise(id)  # 将对象移动到前端
# canvas.lower(id)  # 将对象移动到底部
# canvas.itemconfig(id, fill=&apos;red&apos;)  # 修改对象属性

# 画布标签
# canvas.create_line(fromX, fromY, toX, toY, tag=&apos;bubbles&apos;) 
# canvas.create_line(fromX, fromY, toX, toY, tag=&apos;bubbles&apos;) 
# id = canvas.create_line(fromX, fromY, toX, toY)
# canvas.addtag_withtag(&apos;bubbles&apos;, id)
# canvas.move(&apos;bubbles&apos;, diffX, diffY)
mainloop()</code></pre><h4 id="canvas与滚动条"><a href="#canvas与滚动条" class="headerlink" title="canvas与滚动条"></a>canvas与滚动条</h4><pre><code># gui27.py
# -*- coding: UTF-8 -*-
from Tkinter import *

class ScrolledCanvas(Frame):
    def __init__(self, parent=None, color=&apos;brown&apos;):
        Frame.__init__(self, parent)
        self.pack(expand=YES, fill=BOTH)
        canv = Canvas(self, bg=color, relief=SUNKEN)
        canv.config(width=300, height=200)
        canv.config(scrollregion=(0, 0, 300, 1000))
        canv.config(highlightthickness=0)

        sbar = Scrollbar(self)
        sbar.config(command=canv.yview)
        canv.config(yscrollcommand=sbar.set)
        sbar.pack(side=RIGHT, fill=Y)
        canv.pack(side=LEFT, expand=YES, fill=BOTH)

        self.fillContent(canv)
        canv.bind(&apos;&lt;Double-1&gt;&apos;, self.onDoubleClick)
        self.canvas = canv

    def fillContent(self, canv):
        for i in range(10):
            canv.create_text(150, 50+(i*100), text=&apos;spam&apos;+str(i), fill=&apos;beige&apos;)

    def onDoubleClick(self, event):
        print(event.x, event.y)
        print(self.canvas.canvasx(event.x), self.canvas.canvasy(event.y))

if __name__ == &apos;__main__&apos;:
    ScrolledCanvas().mainloop()</code></pre><h4 id="canvas绑定事件"><a href="#canvas绑定事件" class="headerlink" title="canvas绑定事件"></a>canvas绑定事件</h4><pre><code># gui28.py
# -*- coding: UTF-8 -*-
from Tkinter import *
trace = False

class CanvasEventDemo:
    def __init__(self, parent=None):
        canvas = Canvas(width=300, height=300, bg=&apos;beige&apos;)
        canvas.pack()
        canvas.bind(&apos;&lt;ButtonPress-1&gt;&apos;, self.on_start)
        canvas.bind(&apos;&lt;B1-Motion&gt;&apos;, self.on_grow)
        canvas.bind(&apos;&lt;Double-1&gt;&apos;, self.on_clear)
        canvas.bind(&apos;&lt;ButtonPress-3&gt;&apos;, self.on_move)
        self.canvas = canvas
        self.drawn = None
        self.kinds = [canvas.create_oval, canvas.create_rectangle]

    def on_start(self, event):
        self.shape =self.kinds[0]
        self.kinds = self.kinds[1:] + self.kinds[:1]
        self.start = event
        self.drawn = None

    def on_grow(self, event):
        canvas = event.widget
        if self.drawn:
            canvas.delete(self.drawn)
        object_id = self.shape(self.start.x, self.start.y, event.x, event.y)
        if trace:
            print(object_id)
        self.drawn = object_id

    def on_clear(self, event):
        event.widget.delete(&apos;all&apos;)


    def on_move(self, event):
        if self.drawn:
            if trace:
                print(self.drawn)
            canvas = event.widget
            diffx, diffy = (event.x - self.start.x), (event.y - self.start.y)
            canvas.move(self.drawn, diffx, diffy)
            self.start = event

if __name__ == &apos;__main__&apos;:
    CanvasEventDemo()
    mainloop()</code></pre><h4 id="grid布局和pack布局实现自动扩展"><a href="#grid布局和pack布局实现自动扩展" class="headerlink" title="grid布局和pack布局实现自动扩展"></a>grid布局和pack布局实现自动扩展</h4><pre><code># gui29.py
# -*- coding: UTF-8 -*-

from Tkinter import *
colors = [&apos;red&apos;, &apos;green&apos;, &apos;orange&apos;, &apos;white&apos;, &apos;yellow&apos;, &apos;blue&apos;]

def gridbox(root):
    Label(root, text=&apos;GRID&apos;).grid(columnspan=2)  # 跨两列
    row = 1
    for color in colors:
        lab = Label(root, text=color, relief=RIDGE, width=25)
        ent = Entry(root, bg=color, relief=SUNKEN, width=50)
        lab.grid(row=row, column=0, sticky=NSEW)  # 向4个方向扩展
        ent.grid(row=row, column=1, sticky=NSEW)
        root.rowconfigure(row, weight=1)  # 循环行自动扩展
        row += 1
    root.columnconfigure(0, weight=1)  # 第一列自动扩展
    root.columnconfigure(1, weight=1)  # 第二列自动扩展

def packbox(root):
    Label(root, text=&apos;PACK&apos;).pack()
    for color in colors:
        row = Frame(root)
        lab = Label(row, text=color, relief=RIDGE, width=25)
        ent = Entry(row, bg=color, relief=SUNKEN, width=50)
        row.pack(side=TOP, expand=YES, fill=BOTH)
        lab.pack(side=LEFT, expand=YES, fill=BOTH)
        ent.pack(side=RIGHT, expand=YES, fill=BOTH)

if __name__ == &apos;__main__&apos;:
    root = Tk()
    gridbox(Toplevel(root))
    packbox(Toplevel(root))
    Button(root, text=&apos;Quit&apos;, command=root.quit).pack()
    mainloop()</code></pre><h3 id="PIL：Python-Imaging-Library"><a href="#PIL：Python-Imaging-Library" class="headerlink" title="PIL：Python Imaging Library"></a>PIL：Python Imaging Library</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><pre><code>sudo apt-get install python-imaging
或者
sudo easy_install PIL</code></pre><p>window系统选择</p>
<pre><code>pip install Pillow</code></pre><p>图像操作</p>
<pre><code>import Image
# 打开一个jpg图像文件，注意路径要改成你自己的:
im = Image.open(&apos;/Users/michael/test.jpg&apos;)
# 获得图像尺寸:
w, h = im.size
# 缩放到50%:
im.thumbnail((w//2, h//2))
# 把缩放后的图像用jpeg格式保存:
im.save(&apos;/Users/michael/thumbnail.jpg&apos;, &apos;jpeg&apos;)</code></pre><p>模糊效果</p>
<pre><code>import Image, ImageFilter

im = Image.open(&apos;/Users/hanchang/test.jpg&apos;)
im2 = im.filter(ImageFilter.BLUR)
im2.save(&apos;/Users/hanchang/blur.jpg&apos;, &apos;jpeg&apos;)</code></pre><p>自定义图像验证码</p>
<pre><code>import Image, ImageDraw, ImageFont, ImageFilter
import random
# 随机字母:
def rndChar():
    return chr(random.randint(65, 90))

# 随机颜色1:
def rndColor():
    return (random.randint(64, 255), random.randint(64, 255), random.randint(64, 255))

# 随机颜色2:
def rndColor2():
    return (random.randint(32, 127), random.randint(32, 127), random.randint(32, 127))

# 240 x 60:
width = 60 * 4
height = 60
image = Image.new(&apos;RGB&apos;, (width, height), (255, 255, 255))
# 创建Font对象:
font = ImageFont.truetype(&apos;Arial.ttf&apos;, 36)
# 创建Draw对象:
draw = ImageDraw.Draw(image)
# 填充每个像素:
for x in range(width):
    for y in range(height):
        draw.point((x, y), fill=rndColor())
# 输出文字:
for t in range(4):
    draw.text((60 * t + 10, 10), rndChar(), font=font, fill=rndColor2())
# 模糊:
image = image.filter(ImageFilter.BLUR)
image.save(&apos;code.jpg&apos;, &apos;jpeg&apos;);
自定义字符串生成图片</code></pre><p><code>from PIL import Image,ImageDraw,ImageFont,ImageOps &lt;h1&gt;生成图片&lt;/h1&gt; def create\_image(str, line, name, dir): img\_size = (400, (line*20) + 10) img\_mode = &#39;RGB&#39; img\_font = ImageFont.truetype(&#39;UbuntuMono-R.ttf&#39;, 14) img\_bg = &#39;#FFF&#39; img\_fg = &#39;#000&#39; img = Image.new(mode=img\_mode, size=img\_size, color=img\_bg) draw = ImageDraw.Draw(img) draw.text((10, 10), str, fill=img\_fg, font=img_font) img.save( dir + name + &#39;.png&#39;, &#39;png&#39;)</code></p>

          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.zhuohc.com/2016/11/10/ubuntu14.04服务器基础配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="www.zhuohc.om">
      <meta itemprop="description" content="技术博客、日记记录">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wellread">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/10/ubuntu14.04服务器基础配置/" class="post-title-link" itemprop="url">Ubuntu14.04服务器基础配置</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-11-10 10:49:23" itemprop="dateCreated datePublished" datetime="2016-11-10T10:49:23+08:00">2016-11-10</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-07-23 13:51:43" itemprop="dateModified" datetime="2019-07-23T13:51:43+08:00">2019-07-23</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/运维/" itemprop="url" rel="index"><span itemprop="name">运维</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="登陆ssh"><a href="#登陆ssh" class="headerlink" title="登陆ssh"></a>登陆ssh</h4><pre><code>ssh root@ipaddress 
password:</code></pre><h4 id="首次登陆出现的错误"><a href="#首次登陆出现的错误" class="headerlink" title="首次登陆出现的错误"></a>首次登陆出现的错误</h4><pre><code>perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:


# 安装 localepurge 管理语言文件
sudo apt-get install localepurge
# 或者之后自行配置
sudo dpkg-reconfigure localepurge
# 生成自己需要的语言
sudo locale-gen zh_CN.UTF-8 en_US.UTF-8
# 打印结果
locale
# ssh连接时候指定语言
LC_ALL=en_US.UTF-8 ssh &lt;host&gt;</code></pre><h4 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h4><pre><code>adduser hanchang
password:
retry password:</code></pre><h4 id="将用户添加到sudo用户组"><a href="#将用户添加到sudo用户组" class="headerlink" title="将用户添加到sudo用户组"></a>将用户添加到sudo用户组</h4><p>错误提示</p>
<pre><code>username is not in the sudoers file.


su -
password：
chmod u+w /etc/sudoers   # 添加文件写权限
root ALL=(ALL) ALL 下面添加以下代码
hanchang ALL=(ALL) NOPASSWD: ALL
:wq 退出
chmod u-w /etc/sudoers  # 取消文件写权限</code></pre><p>修改root密码</p>
<pre><code>sudo passwd
password:
retry password:</code></pre><h4 id="禁止root用户远程登陆ssh"><a href="#禁止root用户远程登陆ssh" class="headerlink" title="禁止root用户远程登陆ssh"></a>禁止root用户远程登陆ssh</h4><pre><code>cd /e   tc/ssh/
sudo vim sshd_config
PermitRootLogin yes改成PermitRootLogin no
service sshd restart    或者 /etc/init.d/sshd restart（ssh服务器重启）</code></pre><h4 id="指定IP地址登陆"><a href="#指定IP地址登陆" class="headerlink" title="指定IP地址登陆"></a>指定IP地址登陆</h4><pre><code>vim  /etc/hosts.allow
sshd:192.168.220.164:allow  # 最后添加

vim /etc/hosts.deny
sshd:ALL #最后添加</code></pre><h4 id="避免sshd连接超时"><a href="#避免sshd连接超时" class="headerlink" title="避免sshd连接超时"></a>避免sshd连接超时</h4><p>修改客户端</p>
<pre><code>sudo vim /etc/ssh/ssh_config
# 添加
ServerAliveInterval 30   # 每30秒向服务器发起心跳
ServerAliveCountMax 6 # 允许6次无响应</code></pre><p>或者修改服务器端</p>
<pre><code># 打开
sudo vim /etc/ssh/sshd_config
# 添加
ClientAliveInterval 30
ClientAliveCountMax 6</code></pre><h4 id="流量监控"><a href="#流量监控" class="headerlink" title="流量监控"></a>流量监控</h4><pre><code># 安装监控软件
sudo apt-get install vnstat


# 安装好后运行以下命令初始化数据库
# eth0可以通过ifconfig查看
sudo vnstat -u -i eth1


# 修改配置文件
sudo vim /etc/vnstat.conf
Interface &quot;eth1&quot; #此处修改需要监控的网卡


# 启动守护进程
sudo /etc/init.d/vnstat start
# 默认开机启动
sudo update-rc.d vnstat enable</code></pre><h4 id="查看是否安装iptables"><a href="#查看是否安装iptables" class="headerlink" title="查看是否安装iptables"></a>查看是否安装iptables</h4><pre><code>iptables: /sbin/iptables /usr/share/iptables /usr/share/man/man8/iptables.8.gz #表示已经安装iptables
apt-get install iptables #如果默认没有安装，请运行此命令安装防火墙</code></pre><p>编辑iptables配置文件</p>
<pre><code>sudo vi /etc/iptables.rules
*filter
:INPUT DROP [0:0]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [0:0]
:syn-flood - [0:0]
-A INPUT -i lo -j ACCEPT
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 20 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 21 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 443 -j ACCEPT
-A INPUT -p tcp -m state --state NEW -m tcp --dport 3306 -j ACCEPT
-A INPUT -p icmp -m limit --limit 100/sec --limit-burst 100 -j ACCEPT
-A INPUT -p icmp -m limit --limit 1/s --limit-burst 10 -j ACCEPT
-A INPUT -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -j syn-flood
-A INPUT -j REJECT --reject-with icmp-host-prohibited
-A syn-flood -p tcp -m limit --limit 3/sec --limit-burst 6 -j RETURN
-A syn-flood -j REJECT --reject-with icmp-port-unreachable
COMMIT


# sudo iptables-restore &lt; /etc/iptables.rules #使防火墙规则生效，重启主机执行此命令


# 重启主机会使以上配置失效，以下内容为如何配置开机自动启动防火墙
# vi /etc/network/if-pre-up.d/iptables #创建文件，添加以下内容，使防火墙开机启动
#!/bin/bash
iptables-restore &lt; /etc/iptables.rules


# chmod +x /etc/network/if-pre-up.d/iptables #添加执行权限
# sudo iptables -L -n查看规则是否生效.</code></pre><h4 id="挂载新的硬盘"><a href="#挂载新的硬盘" class="headerlink" title="挂载新的硬盘"></a>挂载新的硬盘</h4><pre><code>fdisk -l
如果出现
Disk /dev/sdb doesn&apos;t contain a valid partition table
说明没有分区,需要处理
fdisk /dev/sdb
Command (m for help):  m为查看选项，这里我们输入n表示创建一个新的分区
选中默认，在分区大小中填写分区大小 +500G</code></pre><p>第二步：使新创建的分区在系统中立即生效 root#partprobe 第三步：格式化新创建的分区</p>
<pre><code>mkfs.ext3 /dev/hdb1</code></pre><p>第四步：使新创建的分区挂载/mnt/ssd_one 目录下</p>
<pre><code>mount /dev/hda1 /mnt/rhce01</code></pre><p>查看已经挂载的信息</p>
<pre><code>sudo vim /etc/mtab</code></pre><p>第五步：开机自动挂载</p>
<pre><code>sudo vim /etc/fstab
# 底部添加
/dev/sdb1              /mnt/hdd_one              ext3    defaults        0 0</code></pre><p>查看现在的硬盘信息</p>
<pre><code>root@m1095:~# df -hl
Filesystem      Size  Used Avail Use% Mounted on
udev             12G  4.0K   12G   1% /dev
tmpfs           2.4G  632K  2.4G   1% /run
/dev/sda2        71G  1.2G   66G   2% /
none            4.0K     0  4.0K   0% /sys/fs/cgroup
none            5.0M     0  5.0M   0% /run/lock
none             12G     0   12G   0% /run/shm
none            100M     0  100M   0% /run/user
/dev/sda1       226M   35M  175M  17% /boot
/dev/sdb1       493G   70M  467G   1% /mnt/hdd_one</code></pre><h4 id="ftp服务器搭建"><a href="#ftp服务器搭建" class="headerlink" title="ftp服务器搭建"></a>ftp服务器搭建</h4><pre><code>sudo apt-get install vsftpd</code></pre><p>编辑配置文件</p>
<pre><code>sudo vim /etc/vsftpd.conf


anonymous_enable=NO   # 禁止匿名用户
local_enable=YES   # 允许本地用户
write_enable=YES # 允许写入
chroot_local_user=YES  # 登陆用户被限制在自己的home目录下
allow_writeable_chroot=YES # 配合chroot_local_user=YES使用
# 当chroot_local_user=YES表示chroot_list为可以访问其他目录的用户
# 当chroot_local_user=NO表示chroot_list为不可以访问其他目录的用户，
# chroot_list_enable=YES  
# chroot_list_file=/etc/vsftpd.chroot_list

# 以下内容为添加内容
# 设置为YES表示开启用户登陆过滤，设置为NO表示不开启用户过滤，所有用户都可以访问
userlist_enable=YES
# 在userlist_enable=YES的前提下，设置是否阻扯user_list文件中的用户登录FTP服务器
# YES表示user_list为黑名单，在文件中的用户不能访问，不在文件中的用户可以访问
# NO表示user_list 为白名单，在文件中的用户可以访问，不在文件中的用户不能访问
userlist_deny=YES


sudo vim /etc/vsftpd.user_list
添加root到文件中</code></pre><p>出现500 OOPS: vsftpd: refusing to run with writable root inside chroot()错误的时候 原因：chroot设置为yes的时候，需要取消ftp根目录的写权限</p>
<pre><code>#### 在配置文件中添加此设置
allow_writeable_chroot=YES </code></pre><h4 id="开启防火墙后vsftpd连接错误处理"><a href="#开启防火墙后vsftpd连接错误处理" class="headerlink" title="开启防火墙后vsftpd连接错误处理"></a>开启防火墙后vsftpd连接错误处理</h4><p>载入以下2个模块</p>
<pre><code>sudo modprobe ip_nat_ftp
sudo modprobe ip_conntrack_ftp


sudo vi /etc/modules

# Add these lines:
ip_nat_ftp
ip_conntrack_ftp</code></pre><p>重启vsftpd服务</p>
<h4 id="安装lamp服务"><a href="#安装lamp服务" class="headerlink" title="安装lamp服务"></a>安装lamp服务</h4><p>安装apache</p>
<pre><code>sudo apt-get install apache2
# 将用户添加到apache用户组中
sudo usermod -a -G www-data username # www-data 为apache用户组名，username为登陆用户名
# apache2安装rewrite
sudo a2enmod rewrite
sudo service apache2 restart
# 删除显示的版本信息
ServerTokens Prod
ServerSignature Off </code></pre><p>配置虚拟主机</p>
<pre><code>sudo vim /etc/apache.2/apache2.conf
# 添加以下内容
&lt;Directory /home/zhc/www/&gt;
        Options FollowSymLinks　#　不要加Index
        AllowOverride All
        Require all granted
&lt;/Directory&gt;</code></pre><p>安装mysql</p>
<pre><code>sudo apt-get install mysql-server php5-mysql
＃配置mysql
sudo mysql_secure_installation</code></pre><p>查看mysql是否开启慢查询日志</p>
<pre><code>mysql&gt; show variables like &apos;%slow%&apos;;
+---------------------------+---------------------------------------+
| Variable_name             | Value                                 |
+---------------------------+---------------------------------------+
| log_slow_admin_statements | OFF                                   |
| log_slow_slave_statements | OFF                                   |
| slow_launch_time          | 2                                     |
| slow_query_log            | OFF                                   |
| slow_query_log_file       | /var/lib/mysql/NC-PH-1551-49-slow.log |
+---------------------------+---------------------------------------+
5 rows in set (0.00 sec)


#开启慢查询
mysql&gt; set global log_slow_queries  = &apos;ON&apos;;
mysql&gt; show variables like &apos;%slow%&apos;;


#开启常规查询
vim /etc/myql/mysql.conf.d/mysqld.conf
general_log_file        = /var/log/mysql/mysql.log
general_log             = 1
#开启错误查询
log_error = /var/log/mysql/error.log
#　防止innodb ibdata1文件过大
innodb_file_per_table=1　</code></pre><p>安装php</p>
<pre><code>sudo apt-get install php5 libapache2-mod-php5 php5-mcrypt
#ubuntu16.04安装方法
# Add the PPA
apt-get install software-properties-common #如果提示没有 add-apt-repository，需要执行此命令安装
sudo add-apt-repository ppa:ondrej/php
# If you get add-apt-repository: command not found run the following command first :
sudo apt-get install software-properties-common
sudo apt-get update
sudo apt-get install php5.6
sudo apt-get install php5.6-*</code></pre><p>配置php</p>
<pre><code>vim /etc/php/5.6/apache/php.ini
expose_php = Off # 隐藏php版本信息</code></pre><h4 id="静态文件同步"><a href="#静态文件同步" class="headerlink" title="静态文件同步"></a>静态文件同步</h4><p>定时任务 crontab -e # 编辑当前用户的定时任务 crontab -u hanchang -e # 编辑指定用户的定时任务</p>
<pre><code># m h  dom mon dow   command
# 分钟 小时 日期 月份 星期 命令
0 0 * * * /bin/sh /home/hanchang/www/scripts/rsyncHK.sh</code></pre>
          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.zhuohc.com/2016/11/10/centos7服务器基础配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="www.zhuohc.om">
      <meta itemprop="description" content="技术博客、日记记录">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wellread">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/10/centos7服务器基础配置/" class="post-title-link" itemprop="url">centos7服务器基础配置</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-11-10 10:29:42" itemprop="dateCreated datePublished" datetime="2016-11-10T10:29:42+08:00">2016-11-10</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-07-24 09:24:47" itemprop="dateModified" datetime="2019-07-24T09:24:47+08:00">2019-07-24</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/运维/" itemprop="url" rel="index"><span itemprop="name">运维</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="查看当前版本"><a href="#查看当前版本" class="headerlink" title="查看当前版本"></a>查看当前版本</h3><pre><code>cat /proc/version 
cat /etc/redhat-release
Centos Linux release 7.2.1511 (Core)</code></pre><h3 id="修改root密码"><a href="#修改root密码" class="headerlink" title="修改root密码"></a>修改root密码</h3><pre><code>&gt; passwd root
&gt; 输入密码</code></pre><h3 id="配置网络"><a href="#配置网络" class="headerlink" title="配置网络"></a>配置网络</h3><p>centos网络配置地址 /etc/sysconfig/network Centos设置主机名和网络配置<br>/etc/sysconfig/network-scripts/ifcfg-eth0针对特定的网卡进行设置<br>/etc/resolv.conf设置DNS<br>/etc/hosts设置指定的域名解析地址<br>当前使用的是虚拟机网桥模式</p>
<pre><code>cd /etc/sysconfig/network-scripts/
vi ifcfg-enp0s23
# 最后添加内容
IPADDR=192.168.0.160  # ip地址
NETMASK=255.255.255.0 # 掩码
GATEWAY=192.168.0.1 # 网关地址
DNS1=202.103.24.68 # DNS地址
# 修改内容
ONBOOT=yes # 启动时网络接口有效
BOOTPROTO=none # dhcp改成none dhcp自动获取，static固定，none手动


# 启动网卡
sudo ifup eth0s23
sudo systemctl restart network</code></pre><p>安装网络查看工具</p>
<pre><code>yum install net-tools</code></pre><p>centos默认的命令是</p>
<pre><code>ip addr</code></pre><h3 id="开机需要启动的5个服务"><a href="#开机需要启动的5个服务" class="headerlink" title="开机需要启动的5个服务"></a>开机需要启动的5个服务</h3><pre><code>sshd远程登陆, 
network网络,
rsyslog日志相关,
crond定时任务,
sysstat检测系统性能</code></pre><h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h3><pre><code>su
# 输入密码
useradd test
passwd test
# 输入密码
# 确认密码
su test # 切换成普通用户</code></pre><p>将test用户加入到sudoers用</p>
<pre><code>#visudo命令 # 相当于直接编辑 /etc/sudoers,但用命令方式更安全,推荐
su
cd /etc
chmod 777 sudoers
root    ALL=(ALL)       ALL
test    ALL=(ALL)       ALL  # 新添加的
chmod 440 sudoers   # 权限改成440，必须，否则会报错</code></pre><h3 id="配置ssh"><a href="#配置ssh" class="headerlink" title="配置ssh"></a>配置ssh</h3><p>安装ssh</p>
<pre><code>yum -y install  openssh*


service sshd start    </code></pre><h3 id="ssh连接"><a href="#ssh连接" class="headerlink" title="ssh连接"></a>ssh连接</h3><pre><code>ssh test@192.168.0.160 # 默认22端口
ssh -p 2222 test@192.168.0.160 # 修改端口后</code></pre><p>禁止root用户远程ssh连接</p>
<pre><code>vi /etc/ssh/sshd_congif 
# 最后添加
# 禁止root远程登陆  
PermitRootLogin no</code></pre><h3 id="关闭SELINUX"><a href="#关闭SELINUX" class="headerlink" title="关闭SELINUX"></a>关闭SELINUX</h3><p>修改/etc/selinux/config 文件<br>将SELINUX=enforcing改为SELINUX=disabled<br>setenforce 0 ##设置SELinux 成为permissive模式,临时关闭或者及时起效</p>
<h3 id="centos开启防火墙"><a href="#centos开启防火墙" class="headerlink" title="centos开启防火墙"></a>centos开启防火墙</h3><pre><code>systemctl mask firewalld
systemctl stop firewalld
yum install iptables-services # 如果下面命令报错，则需要安装
systemctl enable iptables
systemctl start iptables
systemctl enable ip6tables
systemctl start ip6tables</code></pre><p>防火墙开机启动</p>
<pre><code>systemctl enable iptables
systemctl disable iptables


# 查看开机运行的服务
systemctl list-unit-files --type=service</code></pre><p>防火墙是否放行ssh端口22</p>
<pre><code>cd /etc/sysconfig/
vi iptables</code></pre><p>在commit前添加以下内容，并注释文件开头信息</p>
<pre><code># sample configuration for iptables service
# you can edit this manually or use system-config-firewall
# please do not ask us to add additional ports/services to this default configuration
*filter
# :INPUT ACCEPT [0:0]
# :FORWARD ACCEPT [0:0]
# :OUTPUT ACCEPT [0:0]
# -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
# -A INPUT -p icmp -j ACCEPT
# -A INPUT -i lo -j ACCEPT
# -A INPUT -j REJECT --reject-with icmp-host-prohibited
# -A FORWARD -j REJECT --reject-with icmp-host-prohibited





# 安全设置-防止扫描包
# NONE 包(所有标识bit都没有设置)主要是扫描类的数据包
-A INPUT -p tcp --tcp-flags ALL NONE -j DROP
# 防止sync-flood 攻击
-A INPUT -p tcp ! --syn -m state --state NEW -j DROP
# ALL包（所有的标注bit都被设置了）也是网络扫描的数据包
-A INPUT -p tcp --tcp-flags ALL ALL -j DROP

# 开放对应端口
-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT

# 缺省设置
:INPUT DROP [0:0]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [0:0]
# 许所有从服务器端发起的连接，由此返回的响应数据应该是允许的,yum操作等
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
-A INPUT -p icmp -j ACCEPT
# 接受主机localhost的任意请求
-A INPUT -i lo -j ACCEPT
-A INPUT -j REJECT --reject-with icmp-host-prohibited
-A FORWARD -j REJECT --reject-with icmp-host-prohibited

COMMIT</code></pre><h3 id="ftp"><a href="#ftp" class="headerlink" title="ftp"></a>ftp</h3><p>安装及启动</p>
<pre><code>yum install vsftpd
systemctl start vsftpd
systemctl enable vsftpd</code></pre><p>更新防火墙，放行20， 21端口，如果用了代理上传，需要添加被动模式的端口号<br>修改配置项目</p>
<pre><code>vi /etc/vsftpd/vsftpd.conf

anonymous_enable=No # YES改成No,禁止匿名用户
listen=YES # No改成Yes 开启监听
# listen_ipv6=YES  # 此行需要注释掉
tcp_wrappers=YES   # 默认应该就是YES

# 在/etc/vsftpd.chroot_list文件中列出的用户，可以切换到其他目录；
# 未在/etc/vsftpd/chroot_list文件中列出的用户，不能切换到其他目录。
# 需要创建/etc/vsftpd/chroot_list文件
chroot_local_user=YES
chroot_list_enable=YES  
# (default follows) 
chroot_list_file=/etc/vsftpd/chroot_list

# 防止500oops错误 
allow_writeable_chroot=YES 
# 被动模式端口号
pasv_min_port=30000  
pasv_max_port=31000    </code></pre><p>只允许指定ip登陆</p>
<pre><code>vi /etc/hosts.allow
最后添加
vsftpd:192.168.0.19:allow
vsftpd:all:deny</code></pre><p>添加虚拟用户</p>
<pre><code>useradd -g ftp -d /var/ftp/ftpuser -s /sbin/nologin ftpuser 
passwd ftpuser
cd /etc/vsftpd/
touch chroot_list
vi chroot_list
ftpuser # 将用户名称添加到chroot_list里</code></pre><h3 id="LAMP安装"><a href="#LAMP安装" class="headerlink" title="LAMP安装"></a>LAMP安装</h3><p>apache</p>
<pre><code>yum install httpd # 安装apache2
systemctl enable httpd.service
systemctl enable httpd.service</code></pre><p>mysql5.6</p>
<pre><code># 安装rpm包
rpm -Uvh http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm
# 查看可以安装的资源
yum repolist enabled | grep &quot;mysql.*-community.*&quot;
# 安装
yum install mysql-community-server
systemctl start mysqld
systemctl enable mysqld
mysql_secure_installation # 设置密码等</code></pre><p>php5.4</p>
<pre><code>yum install php
yum install php-gd php-ldap php-odbc php-pear php-xml php-xmlrpc php-mbstring php-snmp php-soap curl curl-devel php-mysql php-devel</code></pre><p>php5.6或者其他</p>
<pre><code>yum -y install epel-release
wget https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
wget https://centos7.iuscommunity.org/ius-release.rpm
rpm -Uvh ius-release*.rpm
yum -y update
yum -y install php56u php56u-opcache php56u-xml php56u-mcrypt php56u-gd php56u-devel php56u-mysql php56u-intl php56u-mbstring php56u-bcmath</code></pre><h3 id="LAMP配置"><a href="#LAMP配置" class="headerlink" title="LAMP配置"></a>LAMP配置</h3><p>apache允许php脚本</p>
<pre><code>vi /etc/httpd/conf/httpd.conf
AddType application/x-compress .Z
AddType application/x-gzip .gz .tgz
AddType application/x-httpd-php .php  # 新添加内容</code></pre><p>apache虚拟主机</p>
<pre><code>cd /etc/httpd/conf.d
vi vhost.conf


&lt;VirtualHost *:121&gt;
ServerName phpmyadmin.com
ServerAlias www.phpmyadmin.com
DocumentRoot /var/www/html/phpMyAdmin/
ErrorLog /var/www/web_log/phpMyAdmin.www_error.log # 开启日志需要创建web_log文件夹，否则会报错
CustomLog /var/www/web_log/phpMyAdmin.www_access.log common
&lt;/VirtualHost&gt;
&lt;Directory &quot;/var/www/html/phpMyAdmin/&quot;&gt;
    Options FollowSymLinks
    AllowOverride All
    Require all granted
&lt;/Directory&gt;


&lt;VirtualHost *:108&gt;
ServerName hkmain.com
ServerAlias www.kmain.com
DocumentRoot /var/www/html/NEW/
ErrorLog /var/www/web_log/NEW.www_error.log
CustomLog /var/www/web_log/NEW.www_access.log common
&lt;/VirtualHost&gt;
&lt;Directory &quot;/var/www/html/NEW/&quot;&gt;
    Options FollowSymLinks
    AllowOverride All
    Require all granted
&lt;/Directory&gt;</code></pre><p>apache加载的模块查看</p>
<pre><code>apachectl -M | sort</code></pre><p>网站目录权限配置</p>
<pre><code>chown -R apache:apache WEB_FOLD
chmod 750 WEB_FOLD
cd WEB_FOLD
find -type d -exec chmod 750 {} \;
find -not -type d -exec chmod 640 {} \;
find . -name &quot;Runtime&quot; -type d -exec chmod -R 770 {} \;</code></pre><h3 id="LNMP安装与配置"><a href="#LNMP安装与配置" class="headerlink" title="LNMP安装与配置"></a>LNMP安装与配置</h3><p>参考链接 <a href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-nginx-mysql-php-lemp-stack-on-centos-7" target="_blank" rel="noopener">https://www.digitalocean.com/community/tutorials/how-to-install-linux-nginx-mysql-php-lemp-stack-on-centos-7</a> nginx安装(apache二选一)</p>
<pre><code># 安装pcre库，使nginx支持rewrite
sudo yum install pcre pcre-devel -y
sudo yum install nginx
sudo systemctl start nginx.service
# 设置开机启动
sudo systemctl enable nginx.service</code></pre><p>mysql5.6</p>
<pre><code># 安装rpm包
rpm -Uvh http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm
# 查看可以安装的资源
yum repolist enabled | grep &quot;mysql.*-community.*&quot;
# 安装
yum install mysql-community-server
systemctl start mysqld
systemctl enable mysqld
mysql_secure_installation # 设置密码等</code></pre><p>php安装</p>
<pre><code>yum -y install epel-release
sudo yum install php php-mysql php-fpm
sudo yum install php-pecl-memcache</code></pre><p>配置</p>
<pre><code>vim /etc/php.ini
#cgi.fix_poathinfo=1改成
cgi.fix_pathinfo=0


vim /etc/php-php.d/www.conf
# 第一处修改
listen = /var/run/php-fpm/php-fpm.sock
# 第二处修改
listen.owner = nobody
listen.group = nobody
# 第三处修改
user = nginx
group = nginx


# 重启
sudo systemctl start php-fpm
sudo systemctl enable php-fpm


# 安装xcahe
sudo yum -y install php-xcache xcache-admin
# 如果失败请用下面的方法
# xcahe
wget https://kojipkgs.fedoraproject.org//packages/php-xcache/3.1.1/1.el7/x86_64/php-xcache-3.1.1-1.el7.x86_64.rpm
# 图形化管理
wget https://kojipkgs.fedoraproject.org//packages/php-xcache/3.1.1/1.el7/noarch/xcache-admin-3.1.1-1.el7.noarch.rpm</code></pre><p>#配置nginx sudo vi /etc/nginx/conf.d/default.conf server { listen 80; server_name server_domain_name_or_IP; # 注意位置，在括号外 root /usr/share/nginx/html; index index.php index.html index.htm;</p>
<pre><code>location / {
    try_files $uri $uri/ =404;
}
error_page 404 /404.html;
error_page 500 502 503 504 /50x.html;
location = /50x.html {
    root /usr/share/nginx/html;
}
    # 下面是配置fpm
location ~ \.php$ {
    try_files $uri =404;
    fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock; (这个值从php-fpm复制来)
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include fastcgi_params;
}</code></pre><p>}</p>
<pre><code># 测试
sudo vi /usr/share/nginx/html/info.php
&lt;?php echo phpinfo();&gt;
sudo systemctl restart php-fpm
sudo systemctl restart nginx</code></pre><h3 id="安装imagemagick"><a href="#安装imagemagick" class="headerlink" title="安装imagemagick"></a>安装imagemagick</h3><pre><code>yum install php-pear gcc
yum install ImageMagick ImageMagick-devel ImageMagick-perl
pecl install imagick # 直接回车
echo extension=imagick.so &gt;&gt; /etc/php.ini # 添加php扩展
systemctl restart httpd</code></pre><h3 id="mysql主从复制主服务器配置"><a href="#mysql主从复制主服务器配置" class="headerlink" title="mysql主从复制主服务器配置"></a>mysql主从复制主服务器配置</h3><pre><code>vi /etc/my.cnf
[mysqld] 
server-id=1     # 配一个唯一的ID编号，1至32  
log-bin=mysql-bin  # 二进制文件存放路径  
binlog-do-db=test1  # 需要同步的数据库名  
binlog-ignore-db=test2  # 不需要同步的数据库名 </code></pre><p>其他参考mysql主从复制</p>
<h3 id="rsycn数据同步"><a href="#rsycn数据同步" class="headerlink" title="rsycn数据同步"></a>rsycn数据同步</h3><pre><code>yum install rsync # 安装，默认端口873  
systemctl start rsyncd
systemctl enable rsyncd



vim rsync.conf# 日志文件位置，启动rsync后自动产生这个文件，无需提前创建
log file = /var/log/rsyncd.log
# pid文件的存放位置
pidfile = /var/run/rsyncd.pid
# 支持max connections参数的锁文件
lock file = /var/run/rsync.lock
# 用户认证配置文件，里面保存用户名称和密码，后面会创建这个文件
secrets file = /etc/rsync.pass
# rsync启动时欢迎信息页面文件位置（文件内容自定义
# motd file = /etc/rsyncd.Motd
#

# 设置rsync运行权限为root
# uid = root
# 设置rsync运行权限为root
# gid = root
# 匿名用户
uid = 0
gid = 0
# 默认端口
port = 873
# 默认为true，修改为no，增加对目录文件软连接的备份
use chroot = no
# 设置rsync服务端文件为读写权限
read only = yes
# 不显示rsync服务端资源列表
list = no
# 最大连接数
max connections = 200
# 设置超时时间
timeout = 600
# 不验证用户密码
strict modes = false
# 执行数据同步的用户名，可以设置多个，用英文状态下逗号隔开
# auth users = test
# 允许进行数据同步的客户端IP地址，可以设置多个，用英文状态下逗号隔开
hosts allow = 192.168.0.206, 192.168.0.118
# 禁止数据同步的客户端IP地址，可以设置多个，用英文状态下逗号隔开
# hosts deny = 192.168.21.254

# 自定义名称
[web]
# rsync服务端数据目录路径
path = /var/www/html/HKMAIN_NEW/Upload/product/manual/cn/
#
# 模块名称与自定义名称相同
comment = web

[webe]
path = /var/www/html/HKMAIN_NEW/Upload/product/manual/en/
comment = webe</code></pre><h3 id="centos7-2安装nfs服务器端"><a href="#centos7-2安装nfs服务器端" class="headerlink" title="centos7.2安装nfs服务器端"></a>centos7.2安装nfs服务器端</h3><pre><code># 服务器端安装及配置
# 安装命令
sudo yum install nfs-utils rpcbind
# 查看是否安装成功
$ rpm -aq nfs-utils rpcbind
rpcbind-0.2.0-38.el7.x86_64
nfs-utils-1.3.0-0.33.el7_3.x86_64
# 启动rpcbind
sudo systemctl restart rpcbind
# 查看状态
systemctl status rpcbind
# 开机启动
sudo systemctl enable rpcbind
# 查看是否开机启动
systemctl is-enabled rpcbind # enable表示开机启动，disable表示不开机启动
# 启动及开机启动nfs服务
sudo systemctl restart nfs
sudo systemctl enable nfs
#配置nfs服务
vim /etc/exports
/readonly 192.168.0.160(insecure,ro,no_root_squash) # 指定ip地址，只读
/rwsync 192.168.0.0/24(insecure,rw,sync,no_root_squash) # 指定ip地址段，读写
# 加载配置文件
sudo exportfs -rv
# 查看nfs服务器本地挂载情况
$ showmount -e localhost
Export list for localhost:
/rwsync   192.168.0.0/24
/readonly 192.168.0.160
# 重启服务
sudo systemctl restart nfs


# 客户端安装配置
sudo yum install nfs-utils rpcbind
# 只需启动rpc服务
sudo systemctl restart rpcbind
sudo systemctl enable rpcbind
# 查看可以挂载服务器端的目录
showmount -e 192.168.0.206
Export list for 192.168.0.206:
/rwsync   192.168.0.0/24
/readonly 192.168.0.160
# 挂载
sudo mount -t nfs 192.168.0.206:/readonly /mnt/readonly
sudo mount -t nfs 192.168.0.206:/rwsync /mnt/rwsync
# 查看挂载结果
df -h</code></pre><h3 id="centos7-2安装python3-5"><a href="#centos7-2安装python3-5" class="headerlink" title="centos7.2安装python3.5"></a>centos7.2安装python3.5</h3><pre><code># 安装编译环境
yum install openssl-devel bzip2-devel expat-devel gdbm-devel readline-devel sqlite-devel
# 下载文件
wget https://www.python.org/ftp/python/3.6.6/Python-3.6.6.tgz
# 解压
tar -zxvf Python-3.6.6.tgz
# 编译安装
cd Python-3.5.1
./configure --prefix=/usr/local/python3
make &amp;&amp; make install
# 创建软连接
sudo ln -s /usr/local/python3/bin/python3 /usr/bin/python3
python3 --version
sudo ln -s /usr/local/python3/bin/pip3 /usr/bin/pip3 
pip3 --version

# 添加pip源
vim ~/.pip/pip.conf
[global]
trusted-host =  mirrors.aliyun.com
index-url = https://mirrors.aliyun.com/pypi/simple

### 安装虚拟环境
sudo pip3 uninstall virtualenv
sudo ln -s /usr/local/python3/bin/virtualenv /usr/bin/virtualenv 

### 创建虚拟环境
virtualenv --no-site-packages -p python3 .env
source ./.env/bin/activate</code></pre><h3 id="centos7-2安装node8"><a href="#centos7-2安装node8" class="headerlink" title="centos7.2安装node8"></a>centos7.2安装node8</h3><pre><code># 参考文件 https://nodejs.org/en/download/package-manager/
On RHEL, CentOS or Fedora, for Node.js v8 LTS:

curl --silent --location https://rpm.nodesource.com/setup_8.x | sudo bash -
Alternatively for Node.js 10:

curl --silent --location https://rpm.nodesource.com/setup_10.x | sudo bash -
Then install:
sudo yum -y install nodejs


# 安装cnpm
npm install -g cnpm --registry=https://registry.npm.taobao.org</code></pre><h3 id="centos6-8安装nginx"><a href="#centos6-8安装nginx" class="headerlink" title="centos6.8安装nginx"></a>centos6.8安装nginx</h3><pre><code># 安装pcre库，使nginx支持rewrite
yum install pcre pcre-devel -y
# 安装openssl，https服务需要使用
yum install openssl openssl-devel -y
# 安装 gzip 类库
yum -y install zlib zlib-devel
# 安装编译程序
yum -y install make gcc gcc-c++ ncurses-devel
# 创建用户
useradd nginx -s /sbin/nologin -M
# 下载源码
wget -q https://nginx.org/download/nginx-1.6.3.tar.gz 
tar -zxvf nginx-1.6.3.tar.gz
cd nginx-1.6.3
./configure --user=nginx --group=nginx --prefix=/usr/local/nginx --with-http_ssl_module --with-http_stub_status_module --with-pcre
make
make install


# 启动nginx
/usr/local/nginx/sbin/nginx
# 停止nginx
/usr/local/nginx/sbin/nginx -s quit
# 重新加载配置文件
/usr/local/nginx/sbin/nginx -s reload        
# 测试你的配置文件是否有误
/usr/local/nginx/sbin/nginx -t       
# 查看nginx对应的端口
 lsof -i :80</code></pre><h3 id="centos6-8安装mysql5-7"><a href="#centos6-8安装mysql5-7" class="headerlink" title="centos6.8安装mysql5.7"></a>centos6.8安装mysql5.7</h3><pre><code># yum源直接安装的是mysql5.1版本，抛弃
# 先检查是否有旧版本
rpm -qa | grep mysql
# 删除旧版本
sudo yum -y remove mysql-xx-xx
wget https://dev.mysql.com/get/mysql57-community-release-el6-10.noarch.rpm
sudo yum install mysql57-community-release-el6-10.noarch.rpm
sudo yum install mysql-community-server</code></pre><h3 id="centos7-2-源码安装nginx"><a href="#centos7-2-源码安装nginx" class="headerlink" title="centos7.2 源码安装nginx"></a>centos7.2 源码安装nginx</h3><pre><code># 安装pcre库，使nginx支持rewrite
yum install pcre pcre-devel -y
# 安装openssl，https服务需要使用
yum install openssl openssl-devel -y
# 安装 gzip 类库
yum -y install zlib zlib-devel
# 安装编译程序
yum -y install make gcc gcc-c++ ncurses-devel
# 创建用户
useradd nginx -s /sbin/nologin -M
# 下载源码
wget -q https://nginx.org/download/nginx-1.12.1.tar.gz 
tar -zxvf nginx-1.12.1.tar.gz
cd nginx-1.12.1
./configure --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-http_ssl_module --with-http_realip_module --with-http_gunzip_module --with-http_gzip_static_module --with-threads --with-file-aio --with-ipv6 --with-http_v2_module --with-cc-opt=&apos;-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=native&apos;
make
make install


# 创建链接
sudo ln -s /usr/local/nginx/bin/nginx /usr/bin/nginx
# 启动nginx
/usr/local/nginx/sbin/nginx
# 停止nginx
/usr/local/nginx/sbin/nginx -s quit
# 重新加载配置文件
/usr/local/nginx/sbin/nginx -s reload        
# 测试你的配置文件是否有误
/usr/local/nginx/sbin/nginx -t       
# 查看nginx对应的端口
 lsof -i :80</code></pre><h3 id="centos7-2安装php7"><a href="#centos7-2安装php7" class="headerlink" title="centos7.2安装php7"></a>centos7.2安装php7</h3><pre><code># 加源
sudo yum install epel-release yum-utils
sudo yum install http://rpms.remirepo.net/enterprise/remi-release-7.rpm
# 选择remi
sudo yum-config-manager --enable remi-php70
sudo yum-config-manager --enable remi-php71
sudo yum-config-manager --enable remi-php72
# 安装相关扩展
sudo yum-config-manager --enable remi-php70
sudo yum install php php-common php-opcache php-mcrypt php-cli php-gd php-curl php-mysql
# 安装 PHP FPM 
sudo yum install php-fpm
sudo systemctl enable php-fpm
sudo systemctl start php-fpm
# 配置
sudo vim /etc/php-fpm.d/www.conf
user = nginx
group = nginx


# 配置nginx虚拟server
server {

    # . . . other code

    location ~ \.php$ {
        try_files $uri =404;
        # fastcgi_pass unix:/run/php-fpm/www.sock;
                fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }
}</code></pre><h3 id="centos7-2安装redis"><a href="#centos7-2安装redis" class="headerlink" title="centos7.2安装redis"></a>centos7.2安装redis</h3><pre><code>$ sudo yum install redis
$ sudo systemctl enable redis
$ sudo systemctl start redis
# 查看版本号
$ redis-server --version


# 使用方法 http://www.zhuohc.com/articles/redis%E5%9F%BA%E7%A1%80/</code></pre><p><a href="/articles/centos7-2安装及使用docker/">centos7.2安装使用docker</a> <a href="/articles/centos7-2安装使用sentry/">centos7.2安装使用sentry</a> <a href="/articles/centos7-2使用rabbitmq/">centos7.2安装使用rabbitMQ</a> <a href="/articles/postgresql常见命令/">centos7.2安装使用postgresql</a></p>

          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.zhuohc.com/2016/11/10/javascript入门基础/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="www.zhuohc.om">
      <meta itemprop="description" content="技术博客、日记记录">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wellread">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/10/javascript入门基础/" class="post-title-link" itemprop="url">javascript入门基础</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-11-10 10:19:51" itemprop="dateCreated datePublished" datetime="2016-11-10T10:19:51+08:00">2016-11-10</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-07-24 09:26:26" itemprop="dateModified" datetime="2019-07-24T09:26:26+08:00">2019-07-24</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/前端/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><blockquote>
<p>object(包含Function，Array，Date等)<br>number<br>string<br>boolean<br>null<br>undefined</p>
</blockquote>
<h3 id="类型检测"><a href="#类型检测" class="headerlink" title="类型检测"></a>类型检测</h3><p>typeof 基本类型，function， null可以用===判断</p>
<pre><code>typeof 100           // &quot;number&quot;   
typeof true          // &quot;boolean&quot;    
typeof function      // &quot;function&quot;    
typeof undefined     // &quot;undefined&quot;  
typeof new Object()  // &quot;object&quot;  
typeof [1, 2]        // &quot;object&quot;  
typeof NaN           // &quot;number&quot;  
typeof null          // &quot;object&quot;  </code></pre><p>instanceof</p>
<pre><code>// 不同window或iframe下返回false
[1, 2] instanceof Array === true  
new Object instanceof Array === fasle</code></pre><p>Object.prototype.toString</p>
<pre><code>Object.prototype.toString.apply([1, 2, 3]) === &quot;[object Array]&quot;;  
Object.prototype.toString.apply(function(){}) === &quot;[object Function]&quot;  
Object.prototype.toString.apply(null) === &quot;[object Null]&quot;  // ie678返回[object Object]  
Object.prototype.toString.apply(undefined) === &quot;[object Undefined]&quot;  
Object.prototype.toString.apply(12313) === &quot;[object Number]&quot;  
Object.prototype.toString.apply(&apos;12313&apos;) === &quot;[object String]&quot;</code></pre><p>constructor<br>duck type</p>
<h3 id="表达式"><a href="#表达式" class="headerlink" title="表达式"></a>表达式</h3><p>表达式是一种js短语，可使js解释器用来产生一个值</p>
<pre><code>// 原始表达式
3.14, &quot;test&quot;      // 常量，直接量
null, this, true  // 关键字
i, j, k;           // 变量

// 复合表达式
10 * 20;           // 原始表达式+运算符+原始表达式

// 初始化表达式
[1, 2];
[1,,2];
{x: 1, y: 2};

// 函数表达式
var fe = function(){};
(function(){console.log(&apos;1111&apos;);}){};

// 属性访问表达式
var o = {x:1};
o.x;
o[&apos;x&apos;];

// 调用表达式
func();

// 对象创建表达式
new Func(1, 2);
new Object;</code></pre><h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><blockquote>
<p>一元（+num）<br>二元（a + b）<br>三元（c：a：b） 赋值(x += 1)<br>比较(a == b)<br>算术（a - b）<br>位 （a | b）<br>逻辑 (exp1 &amp;&amp; exp2)<br>字符串(“a” + “b”)<br>特殊</p>
</blockquote>
<h3 id="特殊运算符"><a href="#特殊运算符" class="headerlink" title="特殊运算符"></a>特殊运算符</h3><blockquote>
<p>c? a:b<br>var val = (1, 2, 3) // 逗号运算符<br>delete obj.x // 删除对象属性<br>‘x’ in window; // in 运算符<br>instanceof, typeof // 判断类型<br>new Foo(); // new 运算符<br>this // this运算符<br>void 0 // undefined</p>
</blockquote>
<h3 id="语句"><a href="#语句" class="headerlink" title="语句"></a>语句</h3><p>块语句block<br>块语句是没有作用域的</p>
<pre><code>{  
var str = &apos;hi&apos;;  
console.log(str);  
}  </code></pre><p>声明语句 var<br>var a=1, b=1; 函数语句function</p>
<pre><code>// 函数声明语句  
function fd() {  
    return true;  
}    
// 函数表达式  
var fe = function() {
    //do sth
};</code></pre><p>for in 语句</p>
<pre><code>var p;  
var obj = {x:1, y:2};  
for(p in obj) {
    // 顺序不确定  
}</code></pre><p>swith语句</p>
<pre><code>var val = 2;
switch (val) {
    case 1:
        console.log(1);
        break;
    case 2:
        console.log(2);
        break;
    case 3:
        console.log(3);
        break;
    default:
        console.log(0);
        break;
}</code></pre><p>循环语句</p>
<pre><code>while (isTrue) {
    // do sth
}

do {
    // do sth
} while (isTrue)

var i;
for (i = 0; i &lt; n; i++) {
    // do sth
}</code></pre><p>with语句 // 不使用 try catch语句</p>
<pre><code>try {
    try {
        throw new Error(&apos;oops&apos;);
    } catch(ex) {
        console.error(&apos;inner catch&apos;, ex.message);
        throw ex;
    } finally {
        console.log(&apos;inner  finally&apos;);
    }
} catch(ex) {
    console.error(&apos;outer catch&apos;, ex.message);
} finally {
    console.log(&apos;outer finally&apos;);
}</code></pre><p>结果 内部catch&gt;内部finally&gt;外部catch&gt;外部finally</p>
<pre><code>inner catch oops  
inner  finally  
outer catch oops  
outer finally  </code></pre><h3 id="严格模式-待补充）"><a href="#严格模式-待补充）" class="headerlink" title="严格模式(待补充）"></a>严格模式(待补充）</h3><pre><code>function func() {
    &apos;use strict&apos;;
}</code></pre><h3 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h3><p>对象创建<br>字面量创建</p>
<pre><code>var obj = {x: 1};
console.log(obj);
console.log(obj.y);
Object.prototype.y = 2;
console.log(obj);
console.log(obj.y);
obj.y = undefined;
console.log(obj);
console.log(obj.y);


{ x: 1 }
undefined
{ x: 1 }
2
{ x: 1, y: undefined }
undefined</code></pre><p>new构造器创建</p>
<pre><code>function foo() { this.color = &apos;red&apos;;}
foo.prototype.background = &apos;#000&apos;;
var redColor = new foo();
console.log(redColor);
console.log(typeof redColor.toString);
console.log(redColor.color);
console.log(redColor.background);
console.log(foo);
console.log(foo.prototype);
console.log(foo.prototype.prototype);
console.log(&apos;background&apos; in redColor);
redColor.background = &apos;#FFF&apos;;
console.log(redColor.background);
console.log(foo.prototype.background);


foo { color: &apos;red&apos; }
function
red
#000
[Function: foo]
foo { background: &apos;#000&apos; }
undefined
true
#FFF
#000</code></pre><p>Object.create()创建</p>
<pre><code>function obj() {
    this.x = 1;
}
console.log(obj);
var obj1 = new obj();
console.log(obj1);
var obj2 = Object.create(obj);
console.log(obj2);
console.log(obj2.x);
var obj3 = Object.create(obj1);
console.log(obj3);
console.log(obj3.x);;


[Function: obj]
obj { x: 1 }
Function {}
undefined
obj {}
1</code></pre><h3 id="对象的内部原型-proto-和构造器的原型（prototype）的关系。"><a href="#对象的内部原型-proto-和构造器的原型（prototype）的关系。" class="headerlink" title="对象的内部原型(proto)和构造器的原型（prototype）的关系。"></a>对象的内部原型(<strong>proto</strong>)和构造器的原型（prototype）的关系。</h3><p>一、所有构造器/函数的<strong>proto</strong>都指向Function.prototype，它是一个空函数（Empty function）</p>
<pre><code>Number.__proto__ === Function.prototype  // true  
Boolean.__proto__ === Function.prototype // true  
String.__proto__ === Function.prototype  // true  
Object.__proto__ === Function.prototype  // true  
Function.__proto__ === Function.prototype // true  
Array.__proto__ === Function.prototype   // true  
RegExp.__proto__ === Function.prototype  // true  
Error.__proto__ === Function.prototype   // true  
Date.__proto__ === Function.prototype    // true  
Math.__proto__ === Object.prototype  // true  
JSON.__proto__ === Object.prototype  // true 
// 函数声明
function Person() {}
// 函数表达式
var Man = function() {}
console.log(Person.__proto__ === Function.prototype) // true  
console.log(Man.__proto__ === Function.prototype)    // true  </code></pre><p>所有的构造器都来自于Function.prototype，甚至包括根构造器Object及Function自身。所有构造器都继承了Function.prototype的属性及方法。如length、call、apply、bind（ES5）</p>
<pre><code>console.log(typeof Function.prototype) // function
console.log(typeof Object.prototype)   // object
console.log(typeof Number.prototype)   // object
console.log(typeof Boolean.prototype)  // object
console.log(typeof String.prototype)   // object
console.log(typeof Array.prototype)    // object
console.log(typeof RegExp.prototype)   // object
console.log(typeof Error.prototype)    // object
console.log(typeof Date.prototype)     // object
console.log(typeof Object.prototype)   // object  
console.log(Function.prototype.__proto__ === Object.prototype) // true    
Object.prototype.__proto__ === null  // true  </code></pre><p>二、所有对象的<strong>proto</strong>都指向其构造器的prototype<br>JavaScript引擎内置构造器</p>
<pre><code>var obj = {name: &apos;jack&apos;}
var arr = [1,2,3]
var reg = /hello/g
var date = new Date
var err = new Error(&apos;exception&apos;)

console.log(obj.__proto__ === Object.prototype) // true
console.log(arr.__proto__ === Array.prototype)  // true
console.log(reg.__proto__ === RegExp.prototype) // true
console.log(date.__proto__ === Date.prototype)  // true
console.log(err.__proto__ === Error.prototype)  // true</code></pre><p>自定义的构造器</p>
<pre><code>function Person(name) {
    this.name = name
}
var p = new Person(&apos;jack&apos;)
console.log(p.__proto__ === Person.prototype) // true</code></pre><p>每个对象都有一个constructor属性，可以获取它的构造器</p>
<pre><code>function Person(name) {
    this.name = name
}
var p = new Person(&apos;jack&apos;)
console.log(p.__proto__ === p.constructor.prototype) // true</code></pre><h3 id="对象属性操作"><a href="#对象属性操作" class="headerlink" title="对象属性操作"></a>对象属性操作</h3><p>属性读写</p>
<pre><code>// 属性读写
var obj = {x1: 1, x2: 2};
var i = 1, n = 2;
for(; i&lt;= n; i++) {
    console.log(obj[&apos;x&apos; + i]);
}
// 输出1，2

var p;
for(p in obj) {
    console.log(obj[p]);
}
// 输出1，2

var obj = {x: 1};
// 读写异常
console.log(obj.y); // undefined
var yz = obj.y.z;  // TypeError: Cannot read property &apos;z&apos; of undefined
obj.y.z = 2;      //TypeError: Cannot set property &apos;z&apos; of undefined
// 正确方式
var yz;
if(obj.y) {
    yz = obj.y.z;
}
// 或者
var yz = obj &amp;&amp; obj.y &amp;&amp; obj.y.z  // 这个会返回undefined</code></pre><p>属性删除</p>
<pre><code>var person = {age: 28, title: &apos;fe&apos;};
console.log(delete person.age);  // true
console.log(delete person[&apos;age&apos;]);  // true
console.log(person.age);  // undefined
console.log(delete person.age);   // 注意这个也返回true 判断操作结束后该属性是否存在

// 有些属性是不能删除的
console.log(delete Object.prototype);  // false

// 原因
var descriptor = Object.getOwnPropertyDescriptor(Object, &apos;prototype&apos;);
console.log(descriptor.configurable);  // false

// 变量及函数不可删除
var globalVal = 1;
console.log(delete globalVal);  // false

(function() {
    var localVal = 1;
    console.log(delete localVal);
}());  // false

function fd() {}
console.log(delete fd);  // false

(function() {
    function fd() {};
    console.log(delete fd);
}());  // false


// 隐示定义的变量可以
ohNo = 1;
console.log(delete ohNo);  // true</code></pre><p>对象属性检测</p>
<pre><code>var cat = new Object();
cat.legs = 4;
cat.name = &apos;Kitty&apos;;

console.log(&apos;legs&apos; in cat);  // true
console.log(&apos;abc&apos; in cat);  // false
console.log(&apos;toString&apos; in cat);  // true 继承属性

console.log(cat.hasOwnProperty(&apos;legs&apos;));  // true
console.log(cat.hasOwnProperty(&apos;toString&apos;));  // false

console.log(cat.propertyIsEnumerable(&apos;legs&apos;));  // true
console.log(cat.propertyIsEnumerable(&apos;toString&apos;));  // false


Object.defineProperty(cat, &apos;price&apos;, {enumerable: false, value: 1000});
// defineProperty是Object的方法，默认的标签enumerable值为false
// Object.x创建属性，默认的标签值为true
console.log(cat.propertyIsEnumerable(&apos;price&apos;));  // false
console.log(cat.hasOwnProperty(&apos;price&apos;));  // true


// 判断属性是否存在
if(cat &amp;&amp; cat.legs) {
    cat.legs *= 2;
}

if(cat.legs != undefined) {
    // !== undefined 或者 !== null
}
if(cat.legs !== undefined) {
    // !== undefined
}</code></pre><p>对象属性枚举</p>
<pre><code>var o = {x: 1, y: 2, z: 3};
console.log(&apos;toString&apos; in o);  // true
o.propertyIsEnumerable(&apos;toString&apos;);  // false

var key;
console.log(o.x);  // 1
console.log(o.y);  // 2
console.log(o.z);  // 3
for(key in o) {
    console.log(key);  // x, y, z
    console.log(o.key);  // undefined
    console.log(o[key]);  // 1, 2, 3
}


var obj = Object.create(o);
obj.a = 4;
var key;
for(key in obj) {
    console.log(key); // a, x, y, z
}
var key1;
for (key1 in obj) {
    if(obj.hasOwnProperty(key1)) {
        console.log(key1); // a
    }
}</code></pre><p>对象属性的get/set方法</p>
<pre><code>// 对象属性的get/set方法
var man = {
    name: &apos;Bug&apos;,
    weibo: &apos;Bug&apos;,
    get age() {
        return new Date().getFullYear() - 1988;
    },
    set age(val) {
        console.log(&apos;cannot be set &apos; + val);
    },
};

console.log(man.age);  // 调用age的get方法27
man.age = 100;  // 调用age的set方法 cannot be set 100
console.log(man.age);  // 27


var man = {
    weibo: &apos;Bug&apos;,
    $age: null,
    get age() {
        if(this.$age == undefined) {
            return new Date().getFullYear() - 1988;
        } else {
            return this.$age;
        }
    },
    set age(val) {
        val = +val; // 转为数字
        if(!isNaN(val) &amp;&amp; val &gt; 0 &amp;&amp; val &lt; 150) {
            this.$age = + val;
        } else {
            throw new Error(&apos;Incorrect val = &apos; + val );
        }
    }
}

console.log(man.age);  // 27
man.age = 100;
console.log(man.age);  // 100
//man.age = &apos;abc&apos;;  // Error: Incorrect val = NaN


// get/set方法与原型链

// 这是错误的定义对象属性get方法方式
function foo1() {}
foo1.prototype.z = {
    get: function() {
        return 2;
    }
};
var obj = new foo1();
console.log(obj.z);  // 这个会被认为是对象 { get: [Function] }
obj.z = 200;
console.log(obj.z);  // 200

// 正确定义方法
function foo() {}
Object.defineProperty(foo.prototype, &apos;z&apos;, {
    get: function() {
        return 1;
    },
    // configurable: true,  // 开启此属于也不会被改变
    // writable: true,  // 此项不能配置writable/value get/set 二选一
 });
var obj = new foo();
console.log(obj.z);   // 1
obj.z = 100;
console.log(obj.z);  // 但是还是1 并没有被改变

Object.defineProperty(obj, &apos;z&apos;, {
    value: 100,
    configurable: true
});
console.log(obj.z);  // 100
delete obj.z;
console.log(obj.z);  // 返回到1

// 另外一个例子
var o = {};
Object.defineProperty(o, &apos;x&apos;, {
    value: 1
});  // 默认writable: false, configurable: false
var obj = Object.create(o);
console.log(obj.x);  // 1
obj.x = 100;
console.log(obj.x);  // 还是1


Object.defineProperty(obj, &apos;x&apos;, {
    writable: true,
    configurable: true,
    value: 100
});
console.log(obj.x);  // 100
obj.x = 200;
console.log(obj.x); // 200</code></pre><h3 id="对象属性标签"><a href="#对象属性标签" class="headerlink" title="对象属性标签"></a>对象属性标签</h3><pre><code>person = {};
Object.defineProperty(person, &apos;type&apos;, {
    configurable: false,
    writable: true,
    enumerable: false,
    value: &apos;Object&apos;,
});

console.log(Object.keys(person));   // [] 返回空数组，不能枚举
console.log(Object.getOwnPropertyDescriptor(person, &apos;type&apos;));   // { value: &apos;Object&apos;, writable: true, enumerable: false, configurable: false }


// writable为true，可以通过赋值方法修改value值 [通过赋值修改属性值只和writable标签有关，和configurable无关]
person.type = &apos;Object2&apos;;
console.log(Object.getOwnPropertyDescriptor(person, &apos;type&apos;));  // { value: &apos;Object2&apos;, writable: true, enumerable: false, configurable: false }


// configurable: false 无法使用delete删除属性， 无法使用get/set方法，  无法重新配置属性标签（除了将writable从true修改为false）
console.log(delete person.type);   // 返回false


// 只有writable和configurable标签都为false时，不能修改value标签值，其他情况都可以修改value标签值
Object.defineProperty(person, &apos;type&apos;, {
    configurable: false,
    writable: true,
    enumerable: false,
    value: &apos;Object1&apos;,
});
console.log(Object.getOwnPropertyDescriptor(person, &apos;type&apos;));   // { value: &apos;Object1&apos;, writable: true, enumerable: false, configurable: false }


// 可以重新配置writable标签值(只能重true改为false)
Object.defineProperty(person, &apos;type&apos;, {
    writable: false,
});
console.log(Object.getOwnPropertyDescriptor(person, &apos;type&apos;));   // { value: &apos;Object1&apos;, writable: false, enumerable: false, configurable: false }


// 无法将writable从false改为true
Object.defineProperty(person, &apos;type&apos;, {
    writable: true,
});
console.log(Object.getOwnPropertyDescriptor(person, &apos;type&apos;));   // TypeError: Cannot redefine property: type


// 无法重新配置enumerable，configurable属性
Object.defineProperty(person, &apos;type&apos;, {
    enumerable: true,
});
console.log(Object.getOwnPropertyDescriptor(person, &apos;type&apos;));   // TypeError: Cannot redefine property: type</code></pre><h3 id="对象标签"><a href="#对象标签" class="headerlink" title="对象标签"></a>对象标签</h3><p>原型标签<strong>proto</strong></p>
<pre><code>// 原型标签__proto__

function Person(name) {
    this.name = name;
}
var p = new Person(&apos;jack&apos;);
console.log(p.__proto__ === Person.prototype);  // true</code></pre><p>类型标签</p>
<pre><code>//  对象class标签，表示对象是哪个类型，没有直接的方法去修改或者获取
var toString = Object.prototype.toString;

console.log(toString.call(null));  // [object Null]
console.log(toString.call(undefined));  // [object Undefined]
console.log(toString.call(1));  // [object Number]
console.log(toString.call(new Number(1)));  // [object Number]
console.log(toString.call(true));  // [object Boolean]
console.log(toString.call(new Boolean(true)));  // [object Boolean]</code></pre><p>可扩展标签</p>
<pre><code>// extensible 可扩展标签，表示是否可以继续添加对象属性
var obj = {x: 1, y: 2};
console.log(Object.isExtensible(obj));  // true 对象可扩展
Object.preventExtensions(obj);  // 配置对象不可扩展
console.log(Object.isExtensible(obj));  // false 对象不可扩展
obj.z =1;
console.log(obj.z);  // undefined 添加属性失败
console.log(Object.getOwnPropertyDescriptor(obj, &apos;x&apos;));  // // { value: 1, writable: true, enumerable: true, configurable: true }


// Object.seal方法，对象的所有属性configurable值为false
Object.seal(obj);
console.log(Object.getOwnPropertyDescriptor(obj, &apos;x&apos;));  // { value: 1, writable: true, enumerable: true, configurable: false }
console.log(Object.isSealed(obj)); // true


// Object.freeze方法，对象的所有属性configurable，writable标签值为false
Object.freeze(obj);
console.log(Object.getOwnPropertyDescriptor(obj, &apos;x&apos;));   // // { value: 1, writable: false, enumerable: true, configurable: false }
console.log(Object.isFrozen(obj));  // true</code></pre><h3 id="JS对象与json格式转换"><a href="#JS对象与json格式转换" class="headerlink" title="JS对象与json格式转换"></a>JS对象与json格式转换</h3><pre><code>// 将js对象转为json格式JSON.stringify()
var obj = {x: 1, y: true, z: [1, 2, 3], nullVal: null};
console.log(JSON.stringify(obj));  // {&quot;x&quot;:1,&quot;y&quot;:true,&quot;z&quot;:[1,2,3],&quot;nullVal&quot;:null}

// undefined,NaN,Infinity等特殊属性值
var obj = {val: undefined, a: NaN, b: Infinity, c: new Date()};
console.log(JSON.stringify(obj));  // {&quot;a&quot;:null,&quot;b&quot;:null,&quot;c&quot;:&quot;2015-12-19T12:30:40.456Z&quot;}

// 将json格式转为js对象JSON.parse
var obj = JSON.parse(&apos;{&quot;x&quot;: 1}&apos;);
console.log(obj.x);  // 1

//toJSON方法
var obj = {
    x: 1,
    y: 2,
    o: {
        o1: 1,
        o2: 2,
        toJSON: function() {
            return this.o1 + this.o2;
        }
    },
};
console.log(JSON.stringify(obj));  // {&quot;x&quot;:1,&quot;y&quot;:2,&quot;o&quot;:3}</code></pre><p>###toString valueOf方法</p>
<pre><code>// 对象在作为操作数时，解释器总是优先调用valueOf()--(Date类型的对象在二元“+”运算时例外),而其他情况，解释器总是认为我们想要的是字符串，所以会优先调用toString()。
var obj = {x: 1, y: 2};
console.log(obj.toString());  // [object Object]
console.log(+obj.toString());  // NaN
console.log(3 + obj.toString());  // 3[object Object] 会被理解为字符串拼接
console.log(+obj.valueOf());  // NaN

// 重写
obj.toString = function() {
    return this.x + this.y;
};
console.log(+obj);  // 3
obj.valueOf = function() {
    return this.x + this.y + 100;
};
console.log(+obj);  // 103

// 如果只重写了toString，对象转换时会无视valueOf的存在来进行转换。但是，如果只重写了valueOf方法，在要转换为字符串的时候会优先考虑valueOf方法。在不能调用toString的情况下，只能让valueOf上阵了。

var cc = {
    i: 10,
    valueOf: function() {
        console.log(&apos;valueOf&apos;);
        return this.i;
    }
};

console.log(cc);// 10 { [Number: 10] i: 10, valueOf: [Function] }
console.log(+cc); // 10 valueOf
console.log(&apos;&apos;+cc); // 10 valueOf
console.log(String(cc)); // [object Object]
console.log(Number(cc)); // 10 valueOf
console.log(cc == &apos;10&apos;); // true valueOf</code></pre><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>创建数组</p>
<pre><code>// 字面量创建数组 数组的长度不能超过2^23 - 1 = 4,294,967,295
var BAT = [&apos;B&apos;, &apos;A&apos;, &apos;T&apos;];
var students = [{name: &apos;B&apos;, age: 27}, {name: &apos;A&apos;, age: 30}];
var arr = [&apos;T&apos;, 123, true, null, undefined];
var arrInArr = [[1, 2], [1, 2, 3]];

// 对象创建数组 new关键字可以省略
var arr = new Array();  // var = [];
var arrWithLength = new Array(100);  // undefined * 100
var arrLikesLiteral = new Array(true, false, null, 1, 2, &apos;hi&apos;);  // [true, false, null, 1, 2, &apos;hi&apos;]</code></pre><p>数组元素操作</p>
<pre><code>// 数组元素读写

// 索引访问
var arr = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;];
console.log(arr[1]);  // b
console.log(arr.length);  // 5
arr[5] = &apos;f&apos;;
console.log(arr);  // [ &apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;, &apos;f&apos; ]
console.log(arr.length);  // 6

// delete方法并不会改变数组长度,delete 和定义为undefined的区别
delete arr[0];
console.log(arr);  // [ , &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;, &apos;f&apos; ]
console.log(arr.length);  // 6
console.log(0 in arr);  // 会返回false
arr[1] = undefined;
console.log(arr);  // [ , undefined, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;, &apos;f&apos; ]
console.log(arr.length);  // 6
console.log(1 in arr);  // true

// 数组是动态的，无需指定大小

// 指定索引位置，改变数组
var arr = [];
arr[1] = &apos;b&apos;;
console.log(arr.length);  // 2
console.log(arr);   // [ , &apos;b&apos; ]

// push方法，在数组尾部添加元素,并返回新的数组长度
console.log(arr.push(&apos;c&apos;));  // 3
console.log(arr);  // [ , &apos;b&apos;, &apos;c&apos; ]

// 在数组尾部添加的另一种方法
arr[arr.length] = &apos;d&apos;;
console.log(arr);  // [ , &apos;b&apos;, &apos;c&apos;, &apos;d&apos; ]

// unshift方法，在数组头部添加元素，并返回新的数组长度
console.log(arr.unshift(&apos;a&apos;));  // 5
console.log(arr);  // [ &apos;a&apos;, , &apos;b&apos;, &apos;c&apos;, &apos;d&apos; ]

// pop方法，删除数组尾部的元素并返回这个元素
console.log(arr.pop());  // &apos;d&apos;
console.log(arr);  // [ &apos;a&apos;, , &apos;b&apos;, &apos;c&apos; ]

// 删除数组尾部元素的另个方法
arr.length -= 1;
console.log(arr);  // [ &apos;a&apos;, , &apos;b&apos; ]

// shift方法，删除数组头部的元素并返回这个元素
console.log(arr.shift());  // &apos;a&apos;
console.log(arr);  // [ , &apos;b&apos; ]</code></pre><p>数组迭代</p>
<pre><code>// 数组迭代
var arr = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;, &apos;f&apos;, &apos;g&apos;];
for(var i = 0; i &lt; arr.length; i++) {
    console.log(arr[i]);
}
// a b c d e f g

for(i in arr) {
    console.log(arr[i]);
}
// a b c d e f g

// for in 表达式的坑：会迭代原型的元素
Array.prototype.x = &apos;keng&apos;;
for(i in arr) {
    console.log(arr[i]);
}
// a b c d e f g keng

for(i in arr) {
    if(arr.hasOwnProperty(i)) {
        console.log(arr[i]);
    }
}
// a b c d e f g</code></pre><p>特殊数组：二维数组和稀疏数组</p>
<pre><code>// 特殊数组：二维数组，稀疏数组
// 二维数组
var arr = [[&apos;a&apos;, &apos;b&apos;], [&apos;c&apos;, &apos;d&apos;], [&apos;e&apos;, &apos;f&apos;]];
var i = 0, j = 0;
var row;
for(; i &lt; arr.length; i++) {
    row = arr[i];
    console.log(&apos;row&apos; + i);
    for(j = 0; j &lt; row.length; j++) {
        console.log(row[j]);
    }
}
// row0 a b row1 c d row2 e f

// 稀疏数组：并不含有从0开始的连续索引
var arr1 = [undefined];
var arr2 = new Array(1);
console.log(0 in arr1);  // true
console.log(0 in arr2);  // false</code></pre><h3 id="数组的方法"><a href="#数组的方法" class="headerlink" title="数组的方法"></a>数组的方法</h3><p>Array.prototype.join(separator)</p>
<pre><code>// Array.prototype.join(separator)方法：将数组拼接成字符串，返回字符串，不改变原数组
var arr = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;];
console.log(arr.join());  // a,b,c
console.log(arr.join(&apos;_&apos;));  // a,b,c
function repeatString(str, n) {
    return new Array(n + 1).join(str);
}
console.log(repeatString(&apos;a&apos;, 3));  // aaa
console.log(repeatString(&apos;Hi&apos;, 5));  // HiHiHiHiHi</code></pre><p>Array.prototype.reverse()</p>
<pre><code>// Array.prototype.reverse() 将数组逆序，返回数组本身，会改变数组本身
var arr = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;];
var arr1 = arr;
var arr2 = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;];
console.log(arr.reverse());  // [ &apos;c&apos;, &apos;b&apos;, &apos;a&apos; ]
console.log(arr);  // [ &apos;c&apos;, &apos;b&apos;, &apos;a&apos; ]
console.log(arr1);  // [ &apos;c&apos;, &apos;b&apos;, &apos;a&apos; ]
console.log(arr2);  // [ &apos;a&apos;, &apos;b&apos;, &apos;c&apos; ]</code></pre><p>Array.prototype.sort(sortby）</p>
<pre><code>// Array.prototype.sort(sortby)方法：接受一个函数参数(不传参数默认按字符编码顺序)，返回数组本身，会修改原数组
var arr = [&apos;f&apos;, &apos;b&apos;, &apos;d&apos;, &apos;e&apos;, &apos;a&apos;];
console.log(arr.sort());  // [ &apos;a&apos;, &apos;b&apos;, &apos;d&apos;, &apos;e&apos;, &apos;f&apos; ]
console.log(arr);  // [ &apos;a&apos;, &apos;b&apos;, &apos;d&apos;, &apos;e&apos;, &apos;f&apos; ]

var arr = [13, 24, 51, 3];
console.log(arr.sort());  // [ 13, 24, 3, 51 ]

// 传入参数：比较函数(a, b)
// 若 a 小于 b，在排序后的数组中 a 应该出现在 b 之前，则返回一个小于 0 的值。
// 若 a 等于 b，则返回 0。
// 若 a 大于 b，则返回一个大于 0 的值。
function sortNumber(a, b) {
    return a - b;
}
console.log(arr.sort(sortNumber));  // [ 3, 13, 24, 51 ]

var arr = [{age: 25}, {age: 29}, {age: 40}];
console.log(arr.sort(function sortAge(a, b) {
    return a.age - b.age;
}));  // [ { age: 25 }, { age: 29 }, { age: 40 } ]</code></pre><p>Array.prototype.concat(arrayX, arrayY…..)</p>
<pre><code>// Array.prototype.concat(arrayX, arrayY.....)方法 连接多个数组，返回一个新的数组，不会改变原数组
var arr = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;];
console.log(arr.concat(&apos;d&apos;, &apos;e&apos;));  // [ &apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos; ]
console.log(arr);  // [ &apos;a&apos;, &apos;b&apos;, &apos;c&apos; ]
console.log(arr.concat([&apos;d&apos;, &apos;e&apos;], &apos;f&apos;));  // [ &apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;, &apos;f&apos; ]
console.log(arr.concat([&apos;d&apos;, &apos;e&apos;], [&apos;f&apos;, &apos;g&apos;]));  // &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;, &apos;f&apos;, &apos;g&apos; ]
console.log(arr.concat([[&apos;d&apos;, &apos;e&apos;], &apos;f&apos;]));  // [ &apos;a&apos;, &apos;b&apos;, &apos;c&apos;, [ &apos;d&apos;, &apos;e&apos; ], &apos;f&apos; ]
console.log(arr.concat([[[&apos;d&apos;, &apos;e&apos;], &apos;f&apos;], &apos;g&apos;]));  // [ &apos;a&apos;, &apos;b&apos;, &apos;c&apos;, [ [ &apos;d&apos;, &apos;e&apos; ], &apos;f&apos; ], &apos;g&apos; ]</code></pre><p>Array.prototype.slice(start, end)</p>
<pre><code>// Array.prototype.slice(start, end)方法：左闭右开截取数组，返回一个新的数组，不改变原数组
var arr = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;];
console.log(arr.slice(1, 3));  // [&apos;b&apos;, &apos;c&apos;]
console.log(arr.slice(1));  // [&apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;]
console.log(arr.slice(1, -1));  // [&apos;b&apos;, &apos;c&apos;, &apos;d&apos;]
console.log(arr.slice(-4, -3));  // [&apos;b&apos;]</code></pre><p>Array.prototype.splice(index, howmany, item1,….itemX)</p>
<pre><code>// Array.prototype.splice(index, howmany, item1,....itemX)方法：
// 向/从数组中添加/删除项目，然后返回被删除的项目。会改变原数组
// index参数：必须，整数，添加或删除的位置，左闭合
// howmany参数：可选，设置为0，则不会删除
// item1,.....itemX：可选，向数组中添加的元素

var arr = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;];
console.log(arr.splice(2));   // [ &apos;c&apos;, &apos;d&apos;, &apos;e&apos; ]
console.log(arr);  // [ &apos;a&apos;, &apos;b&apos; ]

var arr = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;];
console.log(arr.splice(2, 1));  // [ &apos;c&apos; ]
console.log(arr);  // [ &apos;a&apos;, &apos;b&apos;, &apos;d&apos;, &apos;e&apos; ]

var arr = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;];
console.log(arr.splice(2, 0));  // []
console.log(arr);  // [ &apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos; ]

var arr = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;];
console.log(arr.splice(2, 2, &apos;f&apos;, &apos;g&apos;, [&apos;h&apos;, &apos;i&apos;]));  // [ &apos;c&apos;, &apos;d&apos; ]
console.log(arr);  // [ &apos;a&apos;, &apos;b&apos;, &apos;f&apos;, &apos;g&apos;, [ &apos;h&apos;, &apos;i&apos; ], &apos;e&apos; ]

// 指定位置插入新的元素
var arr = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;];
console.log(arr.splice(2, 0, &apos;f&apos;));  // []
console.log(arr); // [ &apos;a&apos;, &apos;b&apos;, &apos;f&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos; ]

var arr = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;];
console.log(arr.splice());  // []
console.log(arr); // [ &apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos; ]</code></pre><p>Array.prototype.forEach()</p>
<pre><code>// Array.prototype.forEach()方法(ES5)：接收函数参数
// 函数的3个参数x: 元素值，index：元素索引，a 数组本身
var arr = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;];
arr.forEach(function(x, index, a) {
    console.log(x + &apos;_&apos; + index + &apos;_&apos; + a);
});
// a_0_a,b,c,d,e b_1_a,b,c,d,e c_2_a,b,c,d,e d_3_a,b,c,d,e e_4_a,b,c,d,e</code></pre><p>Array.prototype.map()</p>
<pre><code>//Array.prototype.map()方法(ES5):接收函数参数,不会修改原数组
var arr = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;];
var arr1 = arr.map(function(x) {
    return x + &apos;like&apos;;
});

console.log(arr);  // [ &apos;a&apos;, &apos;b&apos;, &apos;c&apos; ]
console.log(arr1);  // [ &apos;alike&apos;, &apos;blike&apos;, &apos;clike&apos; ]</code></pre><p>Array.prototype.filter()</p>
<pre><code>// Array.prototype.filter()过滤方法(ES5):接收函数参数，不修改原数组
var arr = [1,2,3,4,5,6,7,8,9,10];
var arr1 = arr.filter(function(x, index) {
    return index % 3 === 0 || x &gt;= 8;
});
console.log(arr1);  // [ 1, 4, 7, 8, 9, 10 ]
console.log(arr);  // [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ]</code></pre><p>Array.prototype.every() &amp; Array.prototype.some()</p>
<pre><code>// Array.prototype.every() &amp; Array.prototype.some()判断方法(ES5):接收函数参数，不修改原数组
// every 全部符合条件  some 只需一个符合条件
var arr = [1,2,3,4,5];
console.log(arr.every(function(x) {
    return x &lt; 10;
}));  // true
console.log(arr.every(function(x) {
    return x &lt;= 3;
}));  // false
console.log(arr.some(function(x) {
    return x === 3;
}));  // true
console.log(arr.some(function(x) {
    return x === 100;
}));  // false</code></pre><p>Array.prototype.reduce(function, index) Array.prototype.reduceRight(function, index)</p>
<pre><code>// Array.prototype.reduce(function, index) Array.prototype.reduceRight(function, index)方法
// 接收一个函数参数和一个数组索引参数，并返回一个值，不修改原数组
// 函数参加接收2个参数分别代表2个索引
// 索引参数表示从第index个元素开始
var arr = [1, 2, 3];
var sum = arr.reduce(function(x, y) {
    return x + y;
}, 0);
console.log(sum);  // 6  1+2返回3 3+3 返回6

var arr = [3, 9, 6];
var max = arr.reduce(function(x, y) {
    console.log(x + &apos;|&apos; + y);
    return x &gt; y ? x : y;
});
// 3|9
// 9|6
console.log(max);  // 9

var max = arr.reduceRight(function(x, y) {
    console.log(x + &apos;|&apos; + y);
    return x &gt; y ? x : y;
});
// 6|9
// 9|3
console.log(max);  // 9</code></pre><p>Array.prototype.indexOf(value, index) Array.prototype.lastIndexOf(value, index)</p>
<pre><code>// Array.prototype.indexOf(value, index) Array.prototype.lastIndexOf(value, index)数字检索方法
// value参数表示要查找的元素值，index表示从第几个索引位置开始查找(闭合)
var arr = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;b&apos;, &apos;a&apos;];
console.log(arr.indexOf(&apos;b&apos;));  // 1 在数组中查找是否有元素值为&apos;b&apos;，有则返回这个元素索引
console.log(arr.indexOf(&apos;f&apos;));  // -1 如果没有则返回-1
console.log(arr.indexOf(&apos;b&apos;, 1));  // 1 从第2个元素开始查找，返回索引1
console.log(arr.indexOf(&apos;b&apos;, 2));  // 3
console.log(arr.indexOf(&apos;b&apos;, -2));  // 3
console.log(arr.indexOf(&apos;b&apos;, -4));  // 1
console.log(arr.indexOf(&apos;b&apos;, -8));  // 1
console.log(arr.lastIndexOf(&apos;b&apos;));  // 3</code></pre><p>Array.isArray()</p>
<pre><code>// Array.isArray() 判断是否为数组
console.log(Array.isArray([]));  // true</code></pre><h3 id="创建函数"><a href="#创建函数" class="headerlink" title="创建函数"></a>创建函数</h3><pre><code>// 函数声明
function add(a, b) {
    a = +a;
    b = +b;
    if (isNaN(a) || isNaN(b)) {
        return;
    }
    return a + b;
}

// 函数表达式
var add = function(a, b) {
    // do sth
};

// IEF(立即执行函数表达式)
(function() {
    // do sth
})();

// 函数表达式
return function () {
    // do sth
};

// NFE(命名式函数表达式)
var add = function foo(a, b) {
    // do sth
};</code></pre><p><strong>函数声明和函数表达式区别：函数声明会前置</strong></p>
<pre><code>var num = add(1, 2);
console.log(num);

function add(a, b) {
    a = +a;
    b = +b;
    if (isNaN(a) || isNaN(b)) {
        return;
    }
    return a + b;
}

// 结果为3


var num = add(1, 2);
console.log(num);

var add = function (a, b) {
    a = +a;
    b = +b;
    if (isNaN(a) || isNaN(b)) {
        return;
    }
    return a + b;
};

// TypeError: add is not a function</code></pre><h3 id="this"><a href="#this" class="headerlink" title="this"></a>this</h3><p>全局下的this</p>
<pre><code>// 全局下的this(浏览器下)
console.log(this.window === document);  // true
console.log(this === window);  // true
this.a = 37;
console.log(window.a);  // 37</code></pre><p>一般函数的this</p>
<pre><code>// 一般函数的this（浏览器下）
function f1() {
    return this;
}
f1() === window;  // true

function f2() {
    &quot;use strict&quot;;  // 严格模式下
    return this
}
f2() === undefined;  // true</code></pre><p>作为对象方法的函数的this</p>
<pre><code>var o = {
    prop: 37,
    f: function() {
        return this.prop;
    }
};
console.log(o.f());  // 37

var o = {prop: 37};
function  independent() {
    return this.prop;
}
o.f = independent;
console.log(o.f());  // 37</code></pre><p>原型链上的this</p>
<pre><code>var o = {
    f: function() {
        return this.a + this.b;
    }
};
var p = Object.create(o); // p为空对象，其原型会指向o
p.a = 1;
p.b = 4;
console.log(p.f())  // 5</code></pre><p>构造器中的this</p>
<pre><code>// 当new的函数构造器没有return返回值或者返回值不是对象时，new返回一个this指向构造器的prototype这样一个空对象
// 如果return返回的是对象 new返回的这是这个对象
function Myclass() {
    this.a = 37;
}
var o = new Myclass();
console.log(o.a);  // 37

function C2() {
    this.a = 37;
    return {a: 38};
}
o = new C2();
console.log(o.a);  // 38</code></pre><p>call和apply的this</p>
<pre><code>function add(c, d) {
    return this.a + this.b + c + d;
}
var o = {a: 1, b: 2};
add.call(o, 5, 6);  // 1+3+5+7=16
add.apply(o, [10, 20]);  //1+3+10+20=34

function bar() {
    console.log(Object.prototype.toString.call(this));
}
bar.call(7); // [object Number]</code></pre><p>band和this</p>
<pre><code>//bind是es5后，ie9+使用
function f() {
    return this.a;
}
var g = f.bind({a: &apos;test&apos;});
console.log(g());  // test
var o = {
    a: 37,
    f: f,
    g: g
};
console.log(o.f(), o.g());  // 37, test</code></pre><p>函数arguments属性</p>
<pre><code>function foo(x, y, z) {
    arguments.length;  // 2 实际传入的参数数量
    arguments[0];  // 1 传入第一个参数值
    arguments[0] = 10;
    x;  // 10 将第一个参数值修改为10， 严格模式下任然是1
    arguments[2] = 100;
    z; // undefined  由于第三个参数没有传入，不会绑定
    arguments.callee  === foo;  // true   严格模式下不能使用
}

foo(1, 2);
foo.length;  // 3   3个参数
foo.name;  // &quot;foo&quot; 函数名</code></pre><h3 id="call和apply"><a href="#call和apply" class="headerlink" title="call和apply"></a>call和apply</h3><pre><code>// apply和call方法（浏览器）
// 第一个参数是作为this的对象，如果不是对象，会转换为对象
// call传入的是扁平传入参数
// apply第二个参数树数组
function foo(x, y) {
    console.log(x, y, this);
}

foo.call(100, 1, 2);  // 1, 2, Number(100)
foo.apply(true, [3, 4]);  //3, 4, Boolean(true)
foo.apply(null);  // undefined, undefined, window
foo.apply(undefined);  // undefined, undefined, window</code></pre><h3 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h3><p>bind方法：改变this</p>
<pre><code>// bind方法
this.x = 9;
var module = {
    x: 81,
    getX: function() {
        return this.x;
    }
};

module.getX();  // 81 this指向module

var getX = module.getX;
getX();  // 9 this指向全局变量

var boundGetX = getX.bind(module);
boundGetX();  // 81  bind改变this指向</code></pre><p>bind方法：科里化</p>
<pre><code>// bind方法
function add(a, b, c) {
    return a+b+c;
}

var func = add.bind(undefined, 100);
func(1, 2);  // 103  undefined传给this， 100传给第一个参数a

var func2 = func.bind(undefined, 200);
func2(10);  // 310 undefined传给this，200传给b</code></pre><p>bind与new</p>
<pre><code>// bind方法与new
function foo() {
    this.b = 100;
    return this.a;
}

var func = foo.bind({a: 1});

func(); // 1  foo.bind后this指向{a: 1} return this.a = 1
new func();  // {b: 100} new调用将返回一个this，this会被初始化一个空对象，并且其原型是foo.prototype,空对象的b属性为100</code></pre><h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>闭包基本概念</p>
<pre><code>// 闭包
var n = 999;
function f1() {
    console.log(n);
}
f1();  // 999  函数内部可以访问全局变量

function f1() {
    var n = 999;
}
console.log(n);  // error  函数外部无法访问函数内部局部变量

function f1() {
    n = 999;
}
console.log(n); // 999 因为没有使用var语句，相当于定义一个全局变量


// 简单的闭包原型
function f1() {
    var n = 999;
    function f2() {
        console.log(n);
    }
    return f2
}
var result = f1();
result();  // 999</code></pre><p>闭包案例</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;style&gt;
        #div1 {
            background-color: rosybrown;
        }
        #div2 {
            background-color: aquamarine;
        }
        #div3 {
            background-color: yellowgreen;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;/body&gt;
&lt;script&gt;
    document.body.innerHTML = &apos;&lt;div id=&quot;div1&quot;&gt;aaa&lt;/div&gt;&lt;div id=&quot;div2&quot;&gt;bbb&lt;/div&gt;&lt;div id=&quot;div3&quot;&gt;ccc&lt;/div&gt;&apos;;
    for(var i = 1; i &lt; 4; i++) {
        alert(i);  // 结果为1，2，3
        document.getElementById(&apos;div&apos; + i).
                addEventListener(&apos;click&apos;, function() {
            alert(i);  // 点击div1，div2，div3结果都是4,因为addEventListener的回调函数执行时i都为4
        });
    }
&lt;/script&gt;
&lt;/html&gt;</code></pre><p>正确写法</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;style&gt;
        #div1 {
            background-color: rosybrown;
        }
        #div2 {
            background-color: aquamarine;
        }
        #div3 {
            background-color: yellowgreen;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;/body&gt;
&lt;script&gt;
    document.body.innerHTML = &apos;&lt;div id=&quot;div1&quot;&gt;aaa&lt;/div&gt;&lt;div id=&quot;div2&quot;&gt;bbb&lt;/div&gt;&lt;div id=&quot;div3&quot;&gt;ccc&lt;/div&gt;&apos;;
    for(var i = 1; i &lt; 4; i++) {
        !function(i) {
            alert(i);  // 1,2,3
            document.getElementById(&apos;div&apos; + i).
               addEventListener(&apos;click&apos;, function() {
                   alert(i);  // 1, 2,3 
            });
        }(i);
    }
&lt;/script&gt;
&lt;/html&gt;</code></pre><p>闭包中的封装</p>
<pre><code>(function() {
    var _userID = 23245;
    var _typeID = &apos;item&apos;;
    var exportID = {};

    function converter(userID) {
        return +userID;
    }

    exportID.getUserID = function() {
        return converter(_userID);
    };

    exportID.getTypeID = function() {
        return _typeID;
    };
    global.exportID = exportID;
}());

console.log(exportID.getUserID());  //23245
console.log(exportID._userID);  // undefined</code></pre><h3 id="三种作用域"><a href="#三种作用域" class="headerlink" title="三种作用域"></a>三种作用域</h3><pre><code>// 作用域： 全局作用域，函数作用域，eval作用域
var a = 10;
(function() {
    var b = 20;
})();
console.log(a);  // 10
console.log(b);  // error

for(var item in {a: 1, b: 2}) {
    console.log(item);  // a, b
}
console.log(item); // b</code></pre><h3 id="ES3中的执行上下文"><a href="#ES3中的执行上下文" class="headerlink" title="ES3中的执行上下文"></a>ES3中的执行上下文</h3><p>EC = Execution Context 执行上下文<br>变量对象（Variable Object 简写VO）是一个抽象概念，用于存储执行上下文中的变量，函数声明，函数参数</p>
<pre><code>var a = 10;
function test(x) {
    var b = 20;
}
test(30);</code></pre><p>对应的上下文</p>
<pre><code>// 整个js环境中的VO
VO(globalContext) = {
    a: 10,
    test: &lt;ref to function&gt;
};
// 执行test(30)的VO
VO(test functionContext) = {
    x: 30,
    b: 20
};</code></pre><p>全局执行上下文</p>
<pre><code>VO(globalContext) === [[global]]
[[global]] = {
    Math : &lt;...&gt;,
    String : &lt;...&gt;,
    isNaN: function() {[Native Code]},
    ...
    ...
    window: global
};

String(10);  //[[global]].String(10)
window.a = 10;  // [[global]].window.a = 10
this.b = 20;  // [[global]].b = 20</code></pre><p>变量初始化阶段</p>
<pre><code>// 1, 函数参数（若没有传入，则其值为undefined）
// 2, 函数声明（若函数声明和函数参数冲突，则函数声明会覆盖掉函数参数）
// 3，变量声明（初始化变量值为undefined，若何函数参数，函数声明冲突，会被忽略掉）
function test(a, b) {
    var c = 10;
    function d() {}
    var e = function _e() {};
    (function x() {});
    b = 20;
}
test(10);


AO(test) = {
    a: 10,
    b: undefined,
    c: undefined,
    d: &lt;ref to func &apos;d&apos;&gt;,
    e: undefined,
};</code></pre><p>变量初始化案例1</p>
<pre><code>function foo(x, y, z) {
    function x() {}
    console.log(x);
}

foo(100);  // [Function: x]
//
AO(foo) = {
    //x: 100,
    y: undefined,
    z: undefined,
    x: &lt;ref to func &apos;x&apos;&gt;,  // 函数声明x会覆盖掉参数声明 
}</code></pre><p>变量初始化案例2</p>
<pre><code>function foo(x, y, z) {
    function func() {}
    var func;
    console.log(func);
}
foo(100);  // [Function: func]

function foo(x, y, z) {
    function func() {}
    var func = 1;
    console.log(func);
}
foo(100);  // 1  执行阶段会执行func = 1 这个语句</code></pre><p>代码执行阶段</p>
<pre><code>function test(a, b) {
    var c = 10;
    function d() {}
    var e = function _e() {};
    (function x() {})();
    b = 20;
}

// 初始化阶段
AO(test) = {
    a: 10,
    b: undefined,
    c: undefined,
    d: &lt;ref to func &apos;d&apos;&gt;,
    e: undefined
};
// 代码执行阶段
AO(test) = {
    a: 10,
    b: 20,
    c: 10,
    d: &lt;reference to FunctionDeclaration &apos;d&apos;&gt;,
    e: function _e()
};</code></pre><p>全局执行上下文案例</p>
<pre><code>console.log(x);  // [Function: x]
var x = 10;  // 初始化阶段x: 冲突，被忽略
console.log(x);  // 10
x = 20;
function x() {}  // 初始化阶段x: &lt;ref to func &apos;x&apos;&gt;
console.log(x);  // 20
if (true) {
    var a = 1;  // 初始化阶段a: undefined
} else {
    var b = true;  // 初始化阶段b: undefined
}

console.log(a);  // 1
console.log(b);  // undefined</code></pre><h3 id="prototype"><a href="#prototype" class="headerlink" title="prototype"></a>prototype</h3><p>prototype是函数对象上的预设的对象属性<br>原型是对象上的原型，通常都是构造器的prototype属性<br>实例</p>
<pre><code>function Abc() {
    this.y = 2;
    var z = 3;
}
console.log(Abc);  // [Function: Abc]
console.log(Abc.prototype);  // Abc {}
console.log(typeof Abc.prototype);  // object

Abc.prototype.x = 1;
console.log(Abc.prototype);  // Abc { x: 1 }

var obj1 = new Abc();
console.log(obj1.__proto__);  // Abc { x: 1 }
console.log(obj1.__proto__ === Abc.prototype);  // true  new构造器创建的对象的原型是构造器的prototype属性
console.log(obj1);  // Abc { y: 2 }
console.log(obj1.y);  // 2
console.log(obj1.x);  // 1</code></pre><h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p>实现继承的方法</p>
<pre><code>// 实现继承的方法
function Person() {
}

function Student() {
}

Student.prototype = Person.prototype;  // 错误，会影响被继承类的方法
Student.prototype = new Person();  // 错误，传参问题，因为Student是类，并不是实例

// 正确的方法
Student.prototype = Object.create(Person.prototype);
Student.prototype.constructor = Student;
// Object.create()是es5的方法，下面是fix方法
if(!Object.create) {
    Object.create = function(proto) {
        function F() {}
        F.prototype = proto;
        return new F;
    };
}</code></pre><p>原型的继承方法</p>
<pre><code>function Person(name, age) {
    this.name = name;
    this.age = age;
    this.sayNo = function() {
        console.log(this.name + &apos; say no&apos;);
    }
}

Person.prototype.hi = function() {
    console.log(&apos;Hi, my name is &apos; + this.name + &apos;,I\&apos;m &apos; + this.age + &apos; years old now&apos;);
};
Person.prototype.LEGS_NUM = 2;
Person.prototype.ARMS_NUM = 2;
Person.prototype.walk = function() {
    console.log(this.name + &apos; is walking...&apos;);
};

console.log(Person);  // [Function: Person]
console.log(Person.prototype);  // Person { hi: [Function], LEGS_NUM: 2, ARMS_NUM: 2, walk: [Function] }
var Jack = new Person();  // Person构造器没有return对象，所以返回的是this
Jack.sayNo();  // undefined say no
Jack.hi();  // Hi, my name is undefined,I&apos;m undefined years old now
Jack.walk();  // undefined is walking...
console.log(Jack);  // Person { name: undefined, age: undefined, sayNo: [Function] }
console.log(Jack.__proto__);  // Person { hi: [Function], LEGS_NUM: 2, ARMS_NUM: 2, walk: [Function] }

// 以下5行代码是js中对象继承的写法
function Student(name, age, className) {
    Person.call(this, name, age);  // 使用call方法调用父构造器函数
    this.className = className;
}
Student.prototype = Object.create(Person.prototype);   // 这个如果直接使用Student.prototype = Person.prototype，改变Student对象方法会改变Person对象的方法，因为他们指向的是同一个对象
Student.prototype.constructor = Student;

Student.prototype.hi = function() {
    console.log(&apos;Hi, my name is &apos; + this.name + &apos;, I\&apos;m&apos; + this.age + &apos; years old now, and from &apos; + this.className + &apos;.&apos;);
};
Student.prototype.learn = function(subject) {
    console.log(this.name + &apos; is learning &apos; + subject + &apos; at &apos; + this.className + &apos;.&apos;);
};

var Lussi = new Student(&apos;Lussi&apos;, 27, &apos;Class Tree&apos;);
Lussi.sayNo();  // Lussi say no
Lussi.hi();  // Hi, my name is Lussi, I&apos;m27 years old now, and from Class Tree.
Lussi.walk();  // Lussi is walking...
Lussi.learn(&apos;math&apos;);  // Lussi is learning math at Class Tree.
console.log(Lussi);  // Student {name: &apos;Lussi&apos;, age: 27, sayNo: [Function], className: &apos;Class Tree&apos; }
console.log(Lussi.__proto__);  // Student {constructor: [Function: Student], hi: [Function], learn: [Function] }
console.log(Lussi.__proto__.__proto__);  // Person { hi: [Function], LEGS_NUM: 2, ARMS_NUM: 2, walk: [Function] }
console.log(Lussi.__proto__.__proto__.__proto__);  // {}
console.log(Lussi.__proto__.__proto__.__proto__.__proto__);  // null  
// 改变prototype
Student.prototype.x = 101;  // 会影响已经创建实例的属性
console.log(Jack.x);  // undefined
console.log(Lussi.x);  // 101

Student.prototype = {y: 2};  // 不会影响已经创建实例的属性，但会影响新创建的实例，并且重新修改prototype.y属性也不会改变
console.log(Jack.y); // undefined
console.log(Lussi.y);  // undefined
var Lilei = new Student(&apos;Lilei&apos;, 24, &apos;Class three&apos;);
console.log(Lilei.x);  // undefined
console.log(Lilei.y);  // 2
Student.prototype.y = 100;
console.log(Lilei.y);  // 100
console.log(Lussi.y);  // undefined
Student.prototype.z = 30;
console.log(Lilei.z);  // 30
console.log(Lussi.z);  // undefined
Person.prototype.z = 40;
console.log(Lilei.z);  // 30
console.log(Lussi.z);  // 40
console.log(Jack.z);  // 40</code></pre><h3 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h3><pre><code>// instanceof  左边是对象（如果不是，直接返回false），右边是构造器（如果不是，直接报错），判断构造器的prototype属性是否在对象的原型链上
console.log([1, 2] instanceof Array);  // true
console.log(1 instanceof Array);  // false
console.log(Array.prototype);  // []
console.log(new Object() instanceof Array);  //false
console.log(Object.prototype);  // {}
console.log(new Object() instanceof Object);  // true
console.log(new Array() instanceof Object);  // true</code></pre><h3 id="模拟重载"><a href="#模拟重载" class="headerlink" title="模拟重载"></a>模拟重载</h3><pre><code>function Person() {
    var args = arguments;
    // 判断第一个传入的是不是对象，因为args[null]也返回object，所有需要判断是否为null
    if(typeof args[0] === &apos;object&apos; &amp;&amp; args[0]) {
        if(args[0].name) {
            this.name = args[0].name;
        }
        if(args[0].age) {
            this.age = args[0].age;
        }
    } else {
        if(args[0]) {
            this.name = args[0];
        }
        if(args[1]) {
            this.age = args[1];
        }
    }
}
Person.prototype.toString = function() {
    console.log(&apos;name=&apos; + this.name + &apos;, age=&apos; + this.age);
};

var LiLei = new Person(&apos;LiLei&apos;, 23);
var Hanmm = new Person({name: &apos;Hanmm&apos;, age: 21});
LiLei.toString();  // name=LiLei, age=23
Hanmm.toString();  // name=Hanmm, age=21</code></pre><h3 id="调用子类方法"><a href="#调用子类方法" class="headerlink" title="调用子类方法"></a>调用子类方法</h3><pre><code>function Person(name) {
    this.name = name;
}
function Student(name, className) {
    this.className = className;
    Person.call(this, name);
}

Person.prototype.init = function() {
    console.log(&apos;Person.init&apos;);
};
Student.prototype.init = function() {
    console.log(&apos;Student.init&apos;);
    Person.prototype.init.apply(this, arguments);
};
var LiLei = new Student(&apos;LiLei&apos;, &apos;Class four&apos;);
console.log(LiLei);  // Student { className: &apos;Class four&apos;, name: &apos;LiLei&apos; }
LiLei.init();  // Student.init  Person.init</code></pre><h3 id="实现链式调用"><a href="#实现链式调用" class="headerlink" title="实现链式调用"></a>实现链式调用</h3><pre><code>function ClassManager() {
    console.log(&apos;ClassManager&apos;);
    this.name = &apos;ClassName&apos;;
}
ClassManager.prototype.addClass = function(str) {
    console.log(&apos;class: &apos;  + str + &apos; added.&apos;);
    console.log(this);
    return this;  // this始终指向ClassManger类的实例
};

var manager = new ClassManager();
manager.addClass(&apos;A&apos;).addClass(&apos;B&apos;).addClass(&apos;C&apos;);  //class: A added. ClassManager { name: &apos;ClassName&apos; } class: B added. ClassManager { name: &apos;ClassName&apos; } class: C added. ClassManager { name: &apos;ClassName&apos; }</code></pre>
          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.zhuohc.com/2016/11/10/css兼容性汇总/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="www.zhuohc.om">
      <meta itemprop="description" content="技术博客、日记记录">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wellread">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/10/css兼容性汇总/" class="post-title-link" itemprop="url">css兼容性汇总</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-11-10 10:07:27" itemprop="dateCreated datePublished" datetime="2016-11-10T10:07:27+08:00">2016-11-10</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-07-24 09:24:32" itemprop="dateModified" datetime="2019-07-24T09:24:32+08:00">2019-07-24</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/前端/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="ie6-ie7中overflow-hidden失效问题"><a href="#ie6-ie7中overflow-hidden失效问题" class="headerlink" title="ie6,ie7中overflow:hidden失效问题"></a>ie6,ie7中overflow:hidden失效问题</h3><p>在父元素中使用position:relative;可以hack iframe自适应高度</p>
<h3 id="不建议使用iframe"><a href="#不建议使用iframe" class="headerlink" title="不建议使用iframe"></a>不建议使用iframe</h3><p>首先在css里面设置一个min-height</p>
<pre><code>min-height: 100px;</code></pre><p>主页面嵌入如下js代码</p>
<pre><code>&lt;script&gt;
    function setIframeHeight(iframe) {
        if (iframe) {
            var iframeWin = iframe.contentWindow || iframe.contentDocument.parentWindow;
            if (iframeWin.document.body) {
                iframe.height = iframeWin.document.documentElement.scrollHeight || iframeWin.document.body.scrollHeight;
            }
        }
    };
    window.onload = function () {
        setIframeHeight(document.getElementById(&apos;external-frame&apos;));
    };
&lt;/script&gt;</code></pre><p>iframe标签里</p>
<pre><code>&lt;iframe src=&quot;backtop.html&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; id=&quot;external-frame&quot; onload=&quot;setIframeHeight(this)&quot;&gt;&lt;/iframe&gt;</code></pre><p>css代码</p>
<pre><code>ul {
  display: block;
  width: 100%;
  height: 100%;
  text-indent: 0;
  padding: 0;
  position: absolute;
  top: -100%;
  left: 0;  
  }</code></pre><p>js代码</p>
<pre><code>var defaultTopPosition = $(&apos;#indexCellcate&apos;).css(&apos;top&apos;);</code></pre><p>浏览器差异</p>
<pre><code>ie7，ie8 返回-205.422px  
现代chrome，firefox -205.422px  
但是ie9及以上会返回0px </code></pre><p>如果将css中的top设置为-205.422px，则无差异。<br>但响应式布局要求百分百设置,我的解决思路:<br>获取对应元素的高度来替代top值</p>
<pre><code>var defaultTopPosition = cellcate.children(&apos;li&apos;).height();
defaultTopPosition = -parseInt(defaultTopPosition);</code></pre>
          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.zhuohc.com/2016/11/09/windowsserver服务器基础设置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="www.zhuohc.om">
      <meta itemprop="description" content="技术博客、日记记录">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wellread">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/09/windowsserver服务器基础设置/" class="post-title-link" itemprop="url">windowsserver服务器基础设置</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-11-09 16:04:17" itemprop="dateCreated datePublished" datetime="2016-11-09T16:04:17+08:00">2016-11-09</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-07-24 09:36:42" itemprop="dateModified" datetime="2019-07-24T09:36:42+08:00">2019-07-24</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/运维/" itemprop="url" rel="index"><span itemprop="name">运维</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="远程连接"><a href="#远程连接" class="headerlink" title="远程连接"></a>远程连接</h3><p>禁止administrators组远程连接</p>
<blockquote>
<p>运行gpedit.msc<br>计算机配置-&gt;windows设置-&gt;安全设置-&gt;本地策略-&gt;用户权限分配-&gt;通过终端服务允许登录<br>将Administrators账号删除掉,保留Remote Desktop Users</p>
</blockquote>
<p>创建新的用户</p>
<blockquote>
<p>本地用户和组-&gt;用户右键-&gt;新用户-&gt;输入用户名，设置密码 添加Administrators组，Remote Desktop Users组</p>
</blockquote>
<p>限制登陆次数</p>
<blockquote>
<p>计算机配置-&gt;windows设置-&gt;安全设置-&gt;账户策略-&gt;账户锁定策略”，“账户锁定阈值”设置为 20后，系统会自动设置锁定时间和计数器</p>
</blockquote>
<p>3389端口修改</p>
<blockquote>
<p>修改注册表，是不是需要修改？</p>
</blockquote>
<p>超过2个远程连接处理办法及规避方法</p>
<pre><code>mstsc /console /v:10.10.10.10:3389</code></pre><blockquote>
<p>开始－管理工具－终端服务配置－服务器配置－限制每个用户使用一个会话</p>
</blockquote>
<h3 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h3><p>开启防火墙</p>
<blockquote>
<p>控制面板&gt;防火墙&gt;开启<br>例外里勾选远程桌面,保证服务器可以正常连接<br>其他情况就在添加端口里添加即可</p>
</blockquote>
<h3 id="FTP"><a href="#FTP" class="headerlink" title="FTP"></a>FTP</h3><p>开启ftp</p>
<blockquote>
<p>在控制面板的添加/删除程序——Windows组件向导——应用程序服务器——Internet信息服务(IIS)中选中“文件传输协议(FTP)服务”。<br>需要文件夹AMD64 设置一个ftp用户ftpuser<br>在ftp设置中关掉允许匿名连接<br>主目录中本地路径为E:\FTP<br>不要勾选写入权限<br>默认ftp站点新建虚拟目录ftpuser 路径E:\FTP\ftpuser<br>在防火墙上开启20，21端口 在ftp客户端选择port主动模式，主动模式不需要服务器开启其他端口</p>
</blockquote>

          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.zhuohc.com/2016/11/09/thinkphp入门基础/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="www.zhuohc.om">
      <meta itemprop="description" content="技术博客、日记记录">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wellread">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/09/thinkphp入门基础/" class="post-title-link" itemprop="url">thinkphp入门基础</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-11-09 15:46:39" itemprop="dateCreated datePublished" datetime="2016-11-09T15:46:39+08:00">2016-11-09</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-07-24 09:34:35" itemprop="dateModified" datetime="2019-07-24T09:34:35+08:00">2019-07-24</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/后端/" itemprop="url" rel="index"><span itemprop="name">后端</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h3><h3 id="配置URL伪静态"><a href="#配置URL伪静态" class="headerlink" title="配置URL伪静态"></a>配置URL伪静态</h3><p>3.1版本默认支持.html,.shtml,.xml,.pdf伪静态<br>在配置文件中配置[是在项目下的配置文件./App/Conf/config.php]</p>
<pre><code>&apos;URL_HTML_SUFFIX&apos;=&gt;&apos;html|shmtl|xml&apos; // 多个用 | 分割</code></pre><h3 id="配置URL路由"><a href="#配置URL路由" class="headerlink" title="配置URL路由"></a>配置URL路由</h3><p>基本规则</p>
<blockquote>
<p>一、规则路由<br>格式1：’路由规则’=&gt;’[分组/模块/操作]?额外参数1=值1&amp;额外参数2=值2…’<br>格式2：’路由规则’=&gt;array(‘[分组/模块/操作]‘,’额外参数1=值1&amp;额外参数2=值2…’)<br>格式3：’路由规则’=&gt;’外部地址’<br>格式4：’路由规则’=&gt;array(‘外部地址’,’重定向代码’)<br>注意事项：<br>路由规则中如果以“:”开头，表示动态变量，否则为静态地址<br>格式2的额外参数可以传入数组或者字符串<br>外部地址中如果要引用动态变量， 采用 :1、:2 的方式<br>路由规则支持变量的数字约束定义，例如：’news/:id\d’=&gt;’News/read’<br>规则路由可以支持 全动态和动静结合定义，例如’:user/blog/:id’=&gt;’Home/Blog/user’<br>路由规则非数字变量支持排除，例如 ‘news/:cate^add|edit|delete’=&gt;’News/category’<br>路由规则中的静态地址部分不区分大小写</p>
</blockquote>
<p>配置文件开启路由</p>
<pre><code>&apos;URL_ROUTER_ON&apos;   =&gt; true, //开启路由
&apos;URL_ROUTE_RULES&apos; =&gt; array( //定义路由规则
    &apos;news/:year/:month/:day&apos; =&gt; array(&apos;News/archive&apos;, &apos;status=1&apos;),
    &apos;news/:id&apos;               =&gt; &apos;News/read&apos;,
    &apos;news/read/:id&apos;          =&gt; &apos;/news/:1&apos;,
 ),</code></pre><blockquote>
<p><code>http://serverName/index.php/news/2012/01/08</code>匹配第一条路由<br>也可以写成<code>&#39;news/:year/:month/:day/&#39;=&gt;&#39;News/archive?status=1&#39;,</code> <code>http://serverName/index.php/news/8</code>匹配第二条路由 第三条用于url地址迁移，重定向使用</p>
</blockquote>
<h3 id="正则路由"><a href="#正则路由" class="headerlink" title="正则路由"></a>正则路由</h3><blockquote>
<p>正则路由可以实现更加复杂的路由定义，支持的定义格式如下：<br>格式1：’路由正则’=&gt;’[分组/模块/操作]?参数1=值1&amp;参数2=值2…’<br>格式2：’路由正则’=&gt;array(‘[分组/模块/操作]‘,’参数1=值1&amp;参数2=值2…’)<br>格式3：’路由正则’=&gt;’外部地址’<br>格式4：’路由正则’=&gt;array(‘外部地址’,’重定向代码’)</p>
</blockquote>
<p>注意事项：<br>正则路由规则必须以“/”开始和结束<br>格式2的参数可以传入数组或者字符串<br>参数值和外部地址中可以用动态变量 采用 :1、 :2 的方式<br>下面是正则路由的定义示例：</p>
<pre><code>&apos;URL_ROUTER_ON&apos;   =&gt; true, //开启路由
 &apos;URL_ROUTE_RULES&apos; =&gt; array( //定义路由规则
    &apos;/^blog\/(\d+)$/&apos;        =&gt; &apos;Blog/read?id=:1&apos;,
    &apos;/^blog\/(\d+)\/(\d+)$/&apos; =&gt; &apos;Blog/achive?year=:1&amp;month=:2&apos;,
    &apos;/^blog\/(\d+)_(\d+)$/&apos;  =&gt; &apos;blog.php?id=:1&amp;page=:2&apos;,
 ),
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">    ### URL区分大小写</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">&apos;URL\_CASE\_INSENSITIVE&apos; =&gt;true, // 不区分 &apos;URL\_CASE\_INSENSITIVE&apos; =&gt;false, // 区分</span><br><span class="line"></span><br><span class="line">    ### 缓存</span><br><span class="line">    ### 静态缓存</span><br><span class="line">    开启静态缓存[是在分组下的配置文件./App/Moduels/Index/Conf/config.php]  </span><br><span class="line">    和静态缓存相关的配置参数包括：  </span><br><span class="line">    HTML_CACHE_ON 是否开启静态缓存功能  </span><br><span class="line">    HTML_FILE_SUFFIX 静态文件后缀 惯例配置的值是 .html  </span><br><span class="line">    HTML_CACHE_TIME 默认的静态缓存有效期 默认60秒 可以在静态规则定义覆盖  </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">&apos;HTML\_CACHE\_ON&apos;=&gt;true, &apos;HTML\_CACHE\_RULES&apos;=&gt; array( &apos;ActionName&apos; =&gt; array(&apos;静态规则&apos;, &apos;静态缓存有效期&apos;, &apos;附加规则&apos;), &apos;ModuleName(小写)&apos; =&gt; array(&apos;静态规则&apos;, &apos;静态缓存有效期&apos;, &apos;附加规则&apos;), &apos;ModuleName(小写):ActionName&apos; =&gt; array(&apos;静态规则&apos;, &apos;静态缓存有效期&apos;, &apos;附加规则&apos;), &apos;*&apos; =&gt; array(&apos;静态规则&apos;, &apos;静态缓存有效期&apos;, &apos;附加规则&apos;), &apos;Show:index&apos; =&gt; array(&apos;&#123;:module&#125;_&#123;:action&#125;_&#123;id&#125;&apos;, 100),</span><br><span class="line"></span><br><span class="line">    所有控制器下read方法缓存，其中，&#123;id&#125; 表示取$_GET[&apos;id&apos;] 为静态缓存文件名，第二个参数表示缓存60秒</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">&apos;read&apos;=&gt;array(&apos;&#123;id&#125;&apos;,&apos;60&apos;)</span><br><span class="line"></span><br><span class="line">    User控制器下所有方法缓存，其中，&#123;:action&#125; 表示当前的操作名称</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">&apos;user:&apos;=&gt;array(&apos;User/&#123;:action&#125;_&#123;id&#125;&apos;,&apos;600&apos;)</span><br><span class="line"></span><br><span class="line">    Blog控制器下read方法缓存</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">&apos;blog:read&apos;=&gt;array(&apos;&#123;id&#125;&apos;,0)</span><br><span class="line"></span><br><span class="line">    全局缓存</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">&apos;*&apos;=&gt;array(&apos;&#123;$\_SERVER.REQUEST\_URI|md5&#125;&apos;),</span><br><span class="line"></span><br><span class="line">    静态规则  </span><br><span class="line">    1.  使用系统变量 包括 _GET _REQUEST _SERVER _SESSION _COOKIE</span><br><span class="line">    &gt; &#123;$_×××|function&#125;</span><br><span class="line">    </span><br><span class="line">    2.  使用框架特定的变量</span><br><span class="line">    &gt; &#123;:app&#125;、&#123;:group&#125; 、&#123;:module&#125; 和&#123;:action&#125; 分别表示当前项目名、分组名、模块名和操作名</span><br><span class="line">    </span><br><span class="line">    3.  使用_GET变量</span><br><span class="line">    &gt; &#123;var|function&#125;    也就是说 &#123;id&#125; 其实等效于 &#123;$_GET.id&#125;</span><br><span class="line">    </span><br><span class="line">    4.  直接使用函数</span><br><span class="line">    &gt; &#123;|function&#125;   例如：&#123;|time&#125;</span><br><span class="line">    </span><br><span class="line">    5.  支持混合定义</span><br><span class="line">    &gt; &apos;&#123;id&#125;,&#123;name|md5&#125;&apos;   </span><br><span class="line">    在&#123;&#125;之外的字符作为字符串对待，如果包含有”/”，会自动创建目录。  </span><br><span class="line">    例如，定义下面的静态规则：  </span><br><span class="line">    &#123;:module&#125;/&#123;:action&#125;_&#123;id&#125;  </span><br><span class="line">    则会在静态目录下面创建模块名称的子目录，然后写入操作名_id.shtml 文件。    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    使用get中文参数乱码问题</span><br><span class="line">    ### 原因</span><br><span class="line">    中文浏览器中默认使用的是gbk2312编码</span><br><span class="line">    </span><br><span class="line">    ### 解决方法</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">/\*\* \* 解决get参数中带中文的乱码问题 * @param $keywords 传入的关键字 * @return string */ function decodeToUtf($keywords) &#123; $keywords = mb\_convert\_encoding($keywords, &apos;UTF-8&apos;,&apos;GB2312,UTF-8&apos;); return $keywords; &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">$keywords = I(&apos;keywords&apos;); $keywords = decodeToUtf($keywords); $page = new Page($count,self::$perPage); $page-&gt;parameter = &apos;keywords=&apos; . $keywords;</span><br></pre></td></tr></table></figure></code></pre>
          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.zhuohc.com/2016/11/09/windows软件运行时错误429,ACTIVEX部件不能创建对象的解决方法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="www.zhuohc.om">
      <meta itemprop="description" content="技术博客、日记记录">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wellread">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/09/windows软件运行时错误429,ACTIVEX部件不能创建对象的解决方法/" class="post-title-link" itemprop="url">windows软件运行时错误429,ACTIVEX部件不能创建对象的解决方法</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-11-09 15:38:56" itemprop="dateCreated datePublished" datetime="2016-11-09T15:38:56+08:00">2016-11-09</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-07-24 09:35:20" itemprop="dateModified" datetime="2019-07-24T09:35:20+08:00">2019-07-24</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/运维/" itemprop="url" rel="index"><span itemprop="name">运维</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="安装软件出现“ACTIVEX部件不能创建对象”"><a href="#安装软件出现“ACTIVEX部件不能创建对象”" class="headerlink" title="安装软件出现“ACTIVEX部件不能创建对象”"></a>安装软件出现“ACTIVEX部件不能创建对象”</h3><p>提示错误</p>
<blockquote>
<p>中文：“运行时错误429，ActiveX部件不能创建对象”<br>英文：”Run-time error ‘429’ ActiveX componnent can’t create object”</p>
</blockquote>
<p>新建文件，将下面代码复制粘贴，文件另存为xxx.bat 运行xxx.bat，重启电脑，OK.</p>
<pre><code>echo 正在修复，这个过程可能需要几分钟，请稍候…… 
rundll32.exe advpack.dll /DelNodeRunDLL32 %systemroot%\System32\dacui.dll 
rundll32.exe advpack.dll /DelNodeRunDLL32 %systemroot%\Catroot\icatalog.mdb 
regsvr32 /s comcat.dll 
regsvr32 /s asctrls.ocx 
regsvr32 /s oleaut32.dll 
regsvr32 /s shdocvw.dll /I 
regsvr32 /s shdocvw.dll 
regsvr32 /s browseui.dll 
regsvr32 /s browseui.dll /I 
regsvr32 /s msrating.dll 
regsvr32 /s mlang.dll 
regsvr32 /s hlink.dll 
regsvr32 /s mshtml.dll 
regsvr32 /s mshtmled.dll 
regsvr32 /s urlmon.dll 
regsvr32 /s plugin.ocx 
regsvr32 /s sendmail.dll 
regsvr32 /s mshtml.dll /i 
regsvr32 /s scrobj.dll 
regsvr32 /s corpol.dll 
regsvr32 /s jscrīpt.dll 
regsvr32 /s msxml.dll 
regsvr32 /s imgutil.dll 
regsvr32 /s cryptext.dll 
regsvr32 /s inseng.dll 
regsvr32 /s iesetup.dll /i 
regsvr32 /s cryptdlg.dll 
regsvr32 /s actxprxy.dll 
regsvr32 /s dispex.dll 
regsvr32 /s occache.dll 
regsvr32 /s iepeers.dll 
regsvr32 /s urlmon.dll /i 
regsvr32 /s cdfview.dll 
regsvr32 /s webcheck.dll 
regsvr32 /s mobsync.dll 
regsvr32 /s pngfilt.dll 
regsvr32 /s licmgr10.dll 
regsvr32 /s hhctrl.ocx 
regsvr32 /s inetcfg.dll 
regsvr32 /s trialoc.dll 
regsvr32 /s tdc.ocx 
regsvr32 /s MSR2C.DLL 
regsvr32 /s msident.dll 
regsvr32 /s msieftp.dll 
regsvr32 /s xmsconf.ocx 
regsvr32 /s ils.dll 
regsvr32 /s msoeacct.dll 
regsvr32 /s wab32.dll 
regsvr32 /s wabimp.dll 
regsvr32 /s wabfind.dll 
regsvr32 /s oemiglib.dll 
regsvr32 /s directdb.dll 
regsvr32 /s inetcomm.dll 
regsvr32 /s msoe.dll 
regsvr32 /s oeimport.dll 
regsvr32 /s msdxm.ocx 
regsvr32 /s dxmasf.dll 
regsvr32 /s laprxy.dll 
regsvr32 /s l3codecx.ax 
regsvr32 /s acelpdec.ax 
regsvr32 /s mpg4ds32.ax 
regsvr32 /s danim.dll 
regsvr32 /s Daxctle.ocx 
regsvr32 /s lmrt.dll 
regsvr32 /s datime.dll 
regsvr32 /s dxtrans.dll 
regsvr32 /s dxtmsft.dll 
regsvr32 /s wshom.ocx 
regsvr32 /s wshext.dll 
regsvr32 /s vbscrīpt.dll 
regsvr32 /s scrrun.dll mstinit.exe /setup 
regsvr32 /s msnsspc.dll /SspcCreateSspiReg 
regsvr32 /s msapsspc.dll /SspcCreateSspiReg 
echo. 
echo. 
echo 修复成功！任意键退出！ 
pause&gt;nul</code></pre>
          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.zhuohc.com/2016/11/09/sublime入门基础/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="www.zhuohc.om">
      <meta itemprop="description" content="技术博客、日记记录">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wellread">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/09/sublime入门基础/" class="post-title-link" itemprop="url">sublime入门基础</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-11-09 15:36:07" itemprop="dateCreated datePublished" datetime="2016-11-09T15:36:07+08:00">2016-11-09</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-07-24 09:34:15" itemprop="dateModified" datetime="2019-07-24T09:34:15+08:00">2019-07-24</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/办公/" itemprop="url" rel="index"><span itemprop="name">办公</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h3><p><a href="http://www.sublimetext.com/3" target="_blank" rel="noopener">http://www.sublimetext.com/3</a></p>
<h3 id="Ubuntu下载"><a href="#Ubuntu下载" class="headerlink" title="Ubuntu下载"></a>Ubuntu下载</h3><pre><code>sudo add-apt-repository ppa:webupd8team/sublime-text-3
sudo apt-get update
sudo apt-get install sublime-text-installer</code></pre><h3 id="插件下载地址"><a href="#插件下载地址" class="headerlink" title="插件下载地址"></a>插件下载地址</h3><p><a href="https://packagecontrol.io/" target="_blank" rel="noopener">https://packagecontrol.io/</a></p>
<h3 id="注册码"><a href="#注册码" class="headerlink" title="注册码"></a>注册码</h3><pre><code>----- BEGIN LICENSE ----
Andrew Weber
Single User License
EA7E-855605
813A03DD 5E4AD9E6 6C0EEB94 BC99798F
942194A6 02396E98 E62C9979 4BB979FE
91424C9D A45400BF F6747D88 2FB88078
90F5CC94 1CDC92DC 8457107A F151657B
1D22E383 A997F016 42397640 33F41CFC
E1D0AE85 A0BBD039 0E9C8D55 E1B89D5D
5CDB7036 E56DE1C0 EFCC0840 650CD3A6
B98FC99C 8FAC73EE D2B95564 DF450523
------ END LICENSE ------</code></pre><h3 id="安装Package-Control"><a href="#安装Package-Control" class="headerlink" title="安装Package Control"></a>安装Package Control</h3><pre><code>import urllib.request,os; pf = &apos;Package Control.sublime-package&apos;; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); open(os.path.join(ipp, pf), &apos;wb&apos;).write(urllib.request.urlopen( &apos;http://sublime.wbond.net/&apos; + pf.replace(&apos; &apos;,&apos;%20&apos;)).read())</code></pre><h3 id="安装模板Material-Theme"><a href="#安装模板Material-Theme" class="headerlink" title="安装模板Material Theme"></a>安装模板Material Theme</h3><p>配置方法</p>
<pre><code>Package Control Messages
========================

Material Theme
--------------

  Material Theme for Sublime Text 3

  For more information on the Material Theme: https://github.com/equinusocio/material-theme

  **********************************************************************************************

  If installing manually (not through Package Control), add the following to your 
  Settings - User file and restart Sublime Text after:

  {
    &quot;theme&quot;: &quot;Material-Theme.sublime-theme&quot;,
    &quot;color_scheme&quot;: &quot;Packages/Material Theme/schemes/Material-Theme.tmTheme&quot;,
  }

  **********************************************************************************************

  This theme includes a Darker and Lighter version:

  Darker version:

  {
    &quot;theme&quot;: &quot;Material-Theme-Darker.sublime-theme&quot;,
    &quot;color_scheme&quot;: &quot;Packages/Material Theme/schemes/Material-Theme-Darker.tmTheme&quot;,
  }

  Lighter version:

  {
    &quot;theme&quot;: &quot;Material-Theme-Lighter.sublime-theme&quot;,
    &quot;color_scheme&quot;: &quot;Packages/Material Theme/schemes/Material-Theme-Lighter.tmTheme&quot;,
  }

  **********************************************************************************************

  Recommended UI and font settings for a better experience:

  {
    &quot;overlay_scroll_bars&quot;: &quot;enabled&quot;,
    &quot;line_padding_top&quot;: 3,
    &quot;line_padding_bottom&quot;: 3,
    &quot;always_show_minimap_viewport&quot;: true,
    &quot;bold_folder_labels&quot;: true,
    &quot;indent_guide_options&quot;: [ &quot;draw_normal&quot;, &quot;draw_active&quot; ]    // Highlight active indent
    &quot;font_options&quot;: [ &quot;gray_antialias&quot; ],                       // For retina Mac
  }

  **********************************************************************************************

  Other available theme options:

  &quot;material_theme_small_tab&quot;: true,                           // Set small tabs
  &quot;material_theme_disable_fileicons&quot;: true,                   // Hide siderbar file type icons
  &quot;material_theme_disable_folder_animation&quot;: true,            // Disable folder animation
  &quot;material_theme_small_statusbar&quot;: true,                     // Set small status bar
  &quot;material_theme_disable_tree_indicator&quot;: true,              // Disable sidebar file indicator
  &quot;material_theme_bold_tab&quot;: true,                            // Make the tab labels bolder
  &quot;material_theme_tabs_separator&quot;: true,                      // Show tabs separator
  &quot;material_theme_accent_lime&quot;: true,                         // set green lime accent color
  &quot;material_theme_accent_purple&quot;: true,                       // set purple accent color
  &quot;material_theme_accent_red&quot;: true,                          // set pale red accent color
  &quot;material_theme_accent_orange&quot;: true,                       // set orange accent color
  &quot;material_theme_accent_yellow&quot;: true,                       // set yellow accent color
  &quot;material_theme_panel_separator&quot;: true,                     // show bottom panel separator
  &quot;material_theme_tabs_autowidth&quot;: true,                      // Enable autowidth for tabs
  &quot;material_theme_contrast_mode&quot;: true,                       // Enable sidebar and panels contrast mode</code></pre><h3 id="设置空格缩进"><a href="#设置空格缩进" class="headerlink" title="设置空格缩进"></a>设置空格缩进</h3><pre><code>{    
    &quot;tab_size&quot;: 4,    
    &quot;translate_tabs_to_spaces&quot;: true 
} </code></pre><h3 id="设置行间距"><a href="#设置行间距" class="headerlink" title="设置行间距"></a>设置行间距</h3><pre><code>{
    &quot;line_padding_bottom&quot;: 3, 
    &quot;line_padding_top&quot;: 3,
}    </code></pre><h3 id="插件安装"><a href="#插件安装" class="headerlink" title="插件安装"></a>插件安装</h3><p><strong>Emmet(懂的)</strong><br><strong>ConvertToUtf8(编码转换)</strong><br><strong>Sublime​Linter(代码检查工具，需要配合各语言插件包检查)</strong><br><strong>SideBarEnhancements（侧边栏右键增强）</strong><br><strong>Bracket​Highlighter（显示标签块？？）</strong><br><strong>SublimeCodeIntel(跳转到自定义函数)</strong></p>
<blockquote>
<p>For Windows:<br>Jump to definition = Alt+Click<br>Jump to definition = Control+Windows+Alt+Up<br>Go back = Control+Windows+Alt+Left<br>Manual Code Intelligence = Control+Shift+space<br>需要自己设置执行路径</p>
</blockquote>
<pre><code>&quot;PHP&quot;: {
    &quot;php&quot;: &quot;D:\\PHP\\php.exe&quot;,
    &quot;codeintel_scan_extra_dir&quot;: [],
    &quot;codeintel_scan_files_in_project&quot;: true,
    &quot;codeintel_max_recursive_dir_depth&quot;: 15,
    &quot;codeintel_scan_exclude_dir&quot;:[&quot;D:\\PHP&quot;]
}</code></pre><p><strong>HTML5(html5的snippets)</strong><br><strong>Alignment(自动对齐插件)</strong><br><strong>SFTP(ftp上传)需要配置对应的ftp路径等信息</strong> <strong>git</strong> <strong>jquery(jquery snippets)</strong> <strong>SaSS(可以支持sass)</strong> <strong>DocBlockr（块状注释）</strong></p>
<h3 id="ubuntu安装中文输入法"><a href="#ubuntu安装中文输入法" class="headerlink" title="ubuntu安装中文输入法"></a>ubuntu安装中文输入法</h3><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><pre><code>git clone https://github.com/lyfeyaj/sublime-text-imfix.git</code></pre><h3 id="复制文件"><a href="#复制文件" class="headerlink" title="复制文件"></a>复制文件</h3><pre><code>cd ~/sublime-text-imfix
sudo cp ./lib/libsublime-imfix.so /opt/sublime_text/
sudo cp ./src/subl /usr/bin/</code></pre><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>终端输入</p>
<pre><code>LD_PRELOAD=./libsublime-imfix.so subl</code></pre><h3 id="建立快捷方式"><a href="#建立快捷方式" class="headerlink" title="建立快捷方式"></a>建立快捷方式</h3><p>新建文件sublime放在/home目录下，脚本内容：</p>
<pre><code>#!/bin/bash
LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so subl</code></pre><h3 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h3><p>终端输入</p>
<pre><code>bash ~/sublime</code></pre><h3 id="快捷方式修改"><a href="#快捷方式修改" class="headerlink" title="快捷方式修改"></a>快捷方式修改</h3><p>将[Desktop Entry]中的字符串<br>Exec=/opt/sublime_text/sublime_text %F<br>修改为<br>Exec=bash -c “LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text %F”<br>将[Desktop Action Window]中的字符串<br>Exec=/opt/sublime_text/sublime_text -n<br>修改为<br>Exec=bash -c “LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text -n”<br>将[Desktop Action Document]中的字符串<br>Exec=/opt/sublime_text/sublime_text –command new_file<br>修改为<br>Exec=bash -c “LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text –command new_file”<br>注意：<br>修改时请注意双引号””,否则会导致不能打开带有空格文件名的文件。</p>

          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.zhuohc.com/2016/11/09/git入门基础/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="www.zhuohc.om">
      <meta itemprop="description" content="技术博客、日记记录">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wellread">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/11/09/git入门基础/" class="post-title-link" itemprop="url">git入门基础</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-11-09 15:19:56" itemprop="dateCreated datePublished" datetime="2016-11-09T15:19:56+08:00">2016-11-09</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-07-24 09:26:06" itemprop="dateModified" datetime="2019-07-24T09:26:06+08:00">2019-07-24</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/运维/" itemprop="url" rel="index"><span itemprop="name">运维</span></a></span>

                
                
              
            </span>
          

          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><pre><code>git init</code></pre><h3 id="查看分支"><a href="#查看分支" class="headerlink" title="查看分支"></a>查看分支</h3><pre><code>E:\HKMAIN (master)
λ git branch
* master
  v1.1
  v1.2
λ git branch -v
* master bf0d2bf 蛋白模板修改USAGE:Reconstitute in sterile ddH2O.
  v1.1   b48a782 试剂盒现货列表添加样本信息一栏
  v1.2   acbf4f1 c1.2</code></pre><h3 id="删除分支"><a href="#删除分支" class="headerlink" title="删除分支"></a>删除分支</h3><p>查看未合并的分支</p>
<pre><code>λ git branch --no-merged</code></pre><p>删除分支</p>
<pre><code>git branch -d v1.1</code></pre><p>如果是未合并的分支，使用大写的-D</p>
<pre><code>E:\HKMAIN (master)
λ git branch -d v1.1
Deleted branch v1.1 (was b48a782).

E:\HKMAIN (master)
λ git branch -v
* master bf0d2bf 蛋白模板修改USAGE:Reconstitute in sterile ddH2O.
  v1.2   acbf4f1 c1.2</code></pre><h3 id="创建分支"><a href="#创建分支" class="headerlink" title="创建分支"></a>创建分支</h3><pre><code>git branch v2.0


E:\HKMAIN (master)
λ git branch Vmysql

E:\HKMAIN (master)
λ git branch
  Vmysql
* master
  v1.2

E:\HKMAIN (master)
λ git checkout Vmysql
Switched to branch &apos;Vmysql&apos;

E:\HKMAIN (Vmysql)
λ</code></pre><p>或者直接使用git checkout -b v3.0</p>
<pre><code>E:\HKMAIN (Vmysql)
λ git checkout -b Vsqlserver
Switched to a new branch &apos;Vsqlserver&apos;

E:\HKMAIN (Vsqlserver)
λ git branch
  Vmysql
* Vsqlserver
  master
  v1.2</code></pre><h3 id="git查看远程仓库"><a href="#git查看远程仓库" class="headerlink" title="git查看远程仓库"></a>git查看远程仓库</h3><pre><code># git查看远程仓库
git remote -v
# git添加远程仓库
git remote add xxx git@gitlab.xxx.com:xxx/xxx
# 删除远程分值
git remote rm xxx</code></pre><h3 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h3><p>使用git stash命令先把当前进度保存起来，然后切换到另一个分支去修改bug，修改完提交后，再切回dev分支，使用git stash pop来恢复之前的进度继续开发新功能。</p>
<pre><code># 保存当前进度
git stash
# 查看现有的存储
git stash list
# 恢复最新的进度到工作区
git stash pop
git stash save your-file-name</code></pre>
          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  
  <p class="site-author-name" itemprop="name">www.zhuohc.om</p>
  <div class="site-description motion-element" itemprop="description">技术博客、日记记录</div>
</div>


  <nav class="site-state motion-element">
    
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">58</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
    

    
      
      
      <div class="site-state-item site-state-categories">
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">categories</span>
        
      </div>
    

    
      
      
      <div class="site-state-item site-state-tags">
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">tags</span>
        
      </div>
    
  </nav>













          
          
        </div>
      </div>

      

      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">www.zhuohc.om</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.2.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    

  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
















  
  









  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>




  <script src="/js/utils.js?v=7.2.0"></script>

  <script src="/js/motion.js?v=7.2.0"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.2.0"></script>



  

  <script src="/js/next-boot.js?v=7.2.0"></script>

  

  

  


  

















  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>














<script>
// GET RESPONSIVE HEIGHT PASSED FROM IFRAME

window.addEventListener("message", function(e) {
  var data = e.data;
  if ((typeof data === 'string') && (data.indexOf('ciu_embed') > -1)) {
    var featureID = data.split(':')[1];
    var height = data.split(':')[2];
    $(`iframe[data-feature=${featureID}]`).height(parseInt(height) + 30);
  }
}, false);
</script>








  

</body>
</html>
